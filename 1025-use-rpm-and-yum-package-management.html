<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="102.5 Use RPM and YUM package management "/>
<meta property="og:url" content="./1025-use-rpm-and-yum-package-management.html" />
<meta property="og:description" content="Candidates should be able to perform package management using RPM, YUM and Zypper." />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="102.5 Use RPM and YUM package management ">
<meta name="twitter:description" content="Candidates should be able to perform package management using RPM, YUM and Zypper.">

        <title>102.5 Use RPM and YUM package management  · lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>

                                <li><form class="navbar-search" action="./search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1025-use-rpm-and-yum-package-management.html">
                102.5 Use RPM and YUM package management
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><em>Weight: 3</em></p>
<p>Candidates should be able to perform package management using RPM and YUM tools.</p>
<h3>Goals</h3>
<ul>
<li>Install, re-install, upgrade and remove packages using RPM and YUM.</li>
<li>Obtain information on RPM packages such as version, status, dependencies, integrity and signatures.</li>
<li>Determine what files a package provides, as well as find which package a specific file comes from.</li>
<li>rpm</li>
<li>rpm2cpio</li>
<li>/etc/yum.conf</li>
<li>/etc/yum.repos.d/</li>
<li>yum</li>
<li>yumdownloader</li>
</ul>
<h4>Introduction</h4>
<p><strong>RedHat Package Manager (RPM)</strong> and <strong>Yellowdog Updater Modified (YUM)</strong> are fedora / redhat / rhel / centos / .. tools to manage packages. There are also gui tools for installing and updating. As you saw on 102.4, all package managers can do standard functions like installing, updating and removing packages.</p>
<p>YUM adds extra features likes automatic updates, dependency management and works with repositories (collection on packages accessed over network or on a CD).</p>
<h4>Installing</h4>
<p>Say you want to install "bzr" and you don't have it:</p>
<div class="highlight"><pre><span></span><code>bzr:[jadi@localhost ~]$ bzr
bash: bzr: command not found
[jadi@localhost ~]$ which bzr
/usr/bin/which: no bzr in (/usr/libexec/lightdm:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/home/jadi/.local/bin:/home/jadi/bin)
[jadi@localhost ~]$ whatis bzr
bzr: nothing appropriate.
[jadi@localhost ~]$ whereis bzr
bzr:[jadi@localhost ~]$
</code></pre></div>

<p>we can obtain the bzr RPM package and try to install it:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -i bzr-2.6.0-2.fc20.x86_64.rpm
error: Failed dependencies:
    python-paramiko is needed by bzr-2.6.0-2.fc20.x86_64
</code></pre></div>

<p>Failed because of dependencies. RPM understands the dependencies but does not installs it itself. We need YUM:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# yum install bzr
Loaded plugins: langpacks
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package bzr.x86_64 0:2.6.0-2.fc20 will be installed
--&gt; Processing Dependency: python-paramiko for package: bzr-2.6.0-2.fc20.x86_64
--&gt; Running transaction check
---&gt; Package python-paramiko.noarch 0:1.15.1-1.fc20 will be installed
--&gt; Processing Dependency: python-crypto &gt;= 2.1 for package: python-paramiko-1.15.1-1.fc20.noarch
--&gt; Running transaction check
---&gt; Package python-crypto.x86_64 0:2.6.1-1.fc20 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

=========================================================================================================================
 Package                          Arch                    Version                         Repository                Size
=========================================================================================================================
Installing:
 bzr                              x86_64                  2.6.0-2.fc20                    fedora                   6.3 M
Installing for dependencies:
 python-crypto                    x86_64                  2.6.1-1.fc20                    fedora                   470 k
 python-paramiko                  noarch                  1.15.1-1.fc20                   updates                  998 k

Transaction Summary
=========================================================================================================================
Install  1 Package (+2 Dependent packages)

Total size: 7.7 M
Total download size: 998 k
Installed size: 36 M
Is this ok [y/d/N]: y
Downloading packages:
Not downloading Presto metadata for updates
python-paramiko-1.15.1-1.fc20.noarch.rpm                                                          | 998 kB  00:00:32     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : python-crypto-2.6.1-1.fc20.x86_64                                                                     1/3
  Installing : python-paramiko-1.15.1-1.fc20.noarch                                                                  2/3
  Installing : bzr-2.6.0-2.fc20.x86_64                                                                               3/3
  Verifying  : python-crypto-2.6.1-1.fc20.x86_64                                                                     1/3
  Verifying  : python-paramiko-1.15.1-1.fc20.noarch                                                                  2/3
  Verifying  : bzr-2.6.0-2.fc20.x86_64                                                                               3/3

Installed:
  bzr.x86_64 0:2.6.0-2.fc20                                                                                              

Dependency Installed:
  python-crypto.x86_64 0:2.6.1-1.fc20                       python-paramiko.noarch 0:1.15.1-1.fc20                      

Complete!
</code></pre></div>

<blockquote>
<p>it is possible to use -y switch to prevent yum from asking <em>Is this ok [y/d/N]</em></p>
</blockquote>
<p>but where does YUM find these dependencies to install? it starts from /etc/yum.repos.d/</p>
<div class="highlight"><pre><span></span><code>$ cat /etc/yum.repos.d/fedora-updates.repo
[updates]
name=Fedora $releasever - $basearch - Updates
failovermethod=priority
#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever/$basearch/
metalink=https://mirrors.fedoraproject.org/metalink?repo=updates-released-f$releasever&amp;arch=$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
skip_if_unavailable=False

[updates-debuginfo]
name=Fedora $releasever - $basearch - Updates - Debug
failovermethod=priority
#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever/$basearch/debug/
metalink=https://mirrors.fedoraproject.org/metalink?repo=updates-released-debug-f$releasever&amp;arch=$basearch
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
skip_if_unavailable=False

[updates-source]
name=Fedora $releasever - Updates Source
failovermethod=priority
#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever/SRPMS/
metalink=https://mirrors.fedoraproject.org/metalink?repo=updates-released-source-f$releasever&amp;arch=$basearch
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
skip_if_unavailable=False
</code></pre></div>

<h4>Removing</h4>
<p>For removing a package we have to use -e option of rpm (e for erase) or use the <em>remove</em> option of yum.</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -e bzr
[root@localhost ~]# bzr
bash: bzr: command not found
</code></pre></div>

<p>notes:</p>
<ul>
<li>rpm does not have a database of automatic package installation so it can not remove dependencies which are installed automatically.</li>
<li>rpm removes package without asking!</li>
<li>rpm wont remove a package which is needed by another package</li>
</ul>
<p>but if you remove with yum, it will tell what other packages should be removed because of dependencies:</p>
<div class="highlight"><pre><span></span><code># yum install bzr
# rpm -e python-crypto
error: Failed dependencies:
    python-crypto &gt;= 2.1 is needed by (installed) python-paramiko-1.15.1-1.fc20.noarch
</code></pre></div>

<h4>Upgrading</h4>
<p>the most common command is <code>yum update</code>. This will update the repository data and then will ask user to confirm and then will upgrade the system. It is also possible to give a single package name or use a wildcard (*) to upgrade specific packages.</p>
<div class="highlight"><pre><span></span><code># yum upgrade &#39;cal*&#39;
</code></pre></div>

<p>will upgrade all packages starting with cal (sal calendarj, calibre, ...).</p>
<p>if using RPM, you can upgrade a system using -U or -F instead of -i. This is the difference:</p>
<blockquote>
<p>-i is for install, -U is upgrade or install, -F is upgrade if installed. Note that -F wont install / upgrade the package if it is not already installed.</p>
<p>please note that in many cases, we also us -v (verbose = print a lot of info) and -h (show a progress bar with hash signs (#) ).</p>
</blockquote>
<p>Last thing you should now is if installing or updating using <code>rpm</code> and you have many files which are dependent to each other, you can copy all your rpm files into one directory and do a <code>rpm -Uvh *.rpm</code> and rpm will install/upgrade all the packages based on their dependencies to each other.</p>
<h4>Querying info</h4>
<p>You saw that rpm needed a full file name and yum needed only the package name. How can we find these info?</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# yum list bzr
Loaded plugins: langpacks
Installed Packages
bzr.x86_64                                              2.6.0-2.fc20                                              @fedora

[root@localhost ~]# yum list emacs
Loaded plugins: langpacks
Available Packages
emacs.x86_64                                            1:24.3-25.fc20                                            updates

[root@localhost ~]# rpm -q bzr
bzr-2.6.0-2.fc20.x86_64

[root@localhost ~]# rpm -q emacs
package emacs is not installed

[root@localhost ~]# yum info bzr
Loaded plugins: langpacks
Installed Packages
Name        : bzr
Arch        : x86_64
Version     : 2.6.0
Release     : 2.fc20
Size        : 29 M
Repo        : installed
From repo   : fedora
Summary     : Friendly distributed version control system
URL         : http://www.bazaar-vcs.org/
License     : GPLv2+
Description : Bazaar is a distributed revision control system that is powerful, friendly,
            : and scalable.  It is the successor of Baz-1.x which, in turn, was
            : a user-friendly reimplementation of GNU Arch.

[root@localhost ~]# yum info emacs
Loaded plugins: langpacks
Available Packages
Name        : emacs
Arch        : x86_64
Epoch       : 1
Version     : 24.3
Release     : 25.fc20
Size        : 2.9 M
Repo        : updates/20/x86_64
Summary     : GNU Emacs text editor
URL         : http://www.gnu.org/software/emacs/
License     : GPLv3+
Description : Emacs is a powerful, customizable, self-documenting, modeless text
            : editor. Emacs contains special code editing features, a scripting
            : language (elisp), and the capability to read mail, news, and more
            : without leaving the editor.
            :
            : This package provides an emacs binary with support for X windows.
</code></pre></div>

<p>It is also possible to search for packages:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# yum search hack
Loaded plugins: langpacks
=================================================== N/S matched: hack ===================================================
nethack-vultures.x86_64 : NetHack - Vulture&#39;s Eye and Vulture&#39;s Claw
python-hacking.noarch : OpenStack Hacking Guideline Enforcement
...
...
wmMatrix.x86_64 : DockApp version of Jamie Zawinski&#39;s xmatrix screensaver hack

  Name and summary matches only, use &quot;search all&quot; for everything.
</code></pre></div>

<p>it is also possible to find <strong>all installed</strong> packages with <code>rpm -qa</code> (query all). In most cases we pipe this with <code>sort</code> or <code>grep</code> and <code>`less</code>:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -qa | grep vim
vim-minimal-7.4.027-2.fc20.x86_64
</code></pre></div>

<p>If you need to find files in a installed package:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -ql bzr | head
/etc/bash_completion.d
/etc/bash_completion.d/bzr
/usr/bin/bzr
/usr/lib64/python2.7/site-packages/bzr-2.6.0-py2.7.egg-info
/usr/lib64/python2.7/site-packages/bzrlib
...
...
</code></pre></div>

<blockquote>
<p>It is easy, query list.</p>
<p>if you need same info for a downloaded package, just add the -p switch to your rpm command.</p>
</blockquote>
<p>Another important task is checking which package, own a specific file. Lets see what package gave us the <code>cal</code> command:</p>
<div class="highlight"><pre><span></span><code>[jadi@localhost ~]$ which cal
/usr/bin/cal
[jadi@localhost ~]$ rpm -qf /usr/bin/cal
util-linux-2.24-2.fc20.x86_64
</code></pre></div>

<p><strong>Dependencies</strong></p>
<p>if you need to check what a packages is dependent on, use the <code>--requires</code> or <code>-R</code> switch:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -qR bzr
/usr/bin/python
libc.so.6()(64bit)
libc.so.6(GLIBC_2.14)(64bit)
libc.so.6(GLIBC_2.2.5)(64bit)
libc.so.6(GLIBC_2.3.4)(64bit)
...
...
</code></pre></div>

<p>or use <code>yum deplist bzr</code> instead.</p>
<p>Poof.. I know this part was long so here comes the last important RPM querying command: <strong>whatprovides</strong>.</p>
<p>If you need to use bzr, you need to check what provides it! if installed you can go with <code>rpm -q --whatprovides bzr</code> and if not :</p>
<div class="highlight"><pre><span></span><code>yum whatprovides bzr
Loaded plugins: langpacks
bzr-2.6.0-2.fc20.x86_64 : Friendly distributed version control system
Repo        : fedora
</code></pre></div>

<h4>File Integrity</h4>
<p>Security is important! So RPM can check the MD5 or SHA1 of files. The option is --checksig (-K) and it is a good idea to use it with -v option (verbose):</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -vK bzr-2.6.0-2.fc20.x86_64.rpm
bzr-2.6.0-2.fc20.x86_64.rpm:
    Header V3 RSA/SHA256 Signature, key ID 246110c1: OK
    Header SHA1 digest: OK (171c91fbd14416ac44c0f6d396826d583c3840ce)
    V3 RSA/SHA256 Signature, key ID 246110c1: OK
    MD5 digest: OK (c4478d64f009d07cb17d018b377677ab)
</code></pre></div>

<p>The above output shows that this file is a valid file.</p>
<p>it is also possible to check if the installed FILES by a packages is OK:</p>
<div class="highlight"><pre><span></span><code>[root@localhost ~]# rpm -V bzr
[root@localhost ~]# rm /etc/bash_completion.d/bzr
rm: remove regular file ‘/etc/bash_completion.d/bzr’? y
[root@localhost ~]# rpm -V bzr
missing     /etc/bash_completion.d/bzr
</code></pre></div>

<p>if anything goes wrong, we can always reinstall a package:</p>
<div class="highlight"><pre><span></span><code>yum reinstall bzr
</code></pre></div>

<h4>yumdownloader</h4>
<p>this tool will download rpms from repositories but wont install them. If you need to download all the dependencies too, use the --resolve switch:</p>
<div class="highlight"><pre><span></span><code>yumdownloader --resolve bzr
</code></pre></div>

<h4>rpm2cpio</h4>
<p>The <strong>cpio</strong> is kind of an archive, just like zip or rar or tar. the rpm2cpio can convert rpm files to cpio archives so you can <em>open</em> them using cpio command.</p>
<div class="highlight"><pre><span></span><code># rpm2cpio bzr-2.6.0-2.fc20.x86_64.rpm | cpio -idv
./etc/bash_completion.d
./etc/bash_completion.d/bzr
./usr/bin/bzr
./usr/lib64/python2.7/site-packages/bzr-2.6.0-py2.7.egg-info
./usr/lib64/python2.7/site-packages/bzrlib
./usr/lib64/python2.7/site-packages/bzrlib/__init__.py
./usr/lib64/python2.7/site-packages/bzrlib/_annotator_py.py
./usr/lib64/python2.7/site-packages/bzrlib/_annotator_pyx.so
...
...
</code></pre></div>

<h4>Other tools</h4>
<p>YUM and RPM are the main package manager tools on Fedora, RHEL &amp; Centos. but other system are available. The SUSE uses YaST and many modern desktops (KDE &amp; Gnome) use PackageKit. Package Kit installs and updates packages on graphical interfaces on most linux systems (Debian, Fedora, Arch, ...).</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2010-12-03T10:20:00+01:00">Fri 03 December 2010</time>
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">39</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">44</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">43</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>