<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="102.2 Install a boot manager "/>
<meta property="og:url" content="./1022-install-a-boot-manager.html" />
<meta property="og:description" content="Candidates should be able to select, install and configure a boot manager." />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="102.2 Install a boot manager ">
<meta name="twitter:description" content="Candidates should be able to select, install and configure a boot manager.">

        <title>102.2 Install a boot manager  Â· lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1022-install-a-boot-manager.html">
                102.2 Install a boot manager
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><em>Weight: 2</em> </p>
<p>Description: Candidates should be able to select, install and configure a boot manager.</p>
<h2>Objectives</h2>
<ul>
<li>Providing alternative boot locations and backup boot options.</li>
<li>Install and configure a boot loader such as GRUB Legacy.</li>
<li>Perform basic configuration changes for GRUB 2.</li>
<li>Interact with the boot loader</li>
</ul>
<h2>Terms and Utilities</h2>
<ul>
<li><code>menu.lst</code>, <code>grub.cfg</code> and <code>grub.conf</code></li>
<li>grub-install</li>
<li>grub-mkconfig</li>
<li>MBR</li>
</ul>
<h2>Boot overview</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/G_FzcMZYDbg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Most systems use BIOS or UEFI. When on BIOS, the system will do a self test called POST (Power-On Self-Test). Then it will hand over the boot process to the first sector of Master Boot Record (MBR) which is track (Cylinder) 0, side (Head) 0 and Sector 1 of the first disk. </p>
<p>MBR is only 512 bytes so we need a <em>smart bootloader</em> to handle larger boot managers and even multiple systems. Some of these boot loaders are LILO, GRUB and GRUB2.</p>
<p>If the system is using UEFI, the hardware will follow the UEFI stages. They start with a security phase and will continue till the end phase where the UEFI looks for an EFI System Partition, which is just a FAT32 partition (Usually the first one, but that's implementation-defined) with PE executables and runs them. </p>
<p>In both cases, the binary starts the boot loader. It might be a complete bootloader on <code>/boot/efi/</code> of your computer or a small loader for the main grub on the MBR or a windows loader or even a chainloader.</p>
<blockquote>
<p>Chain Loading is when a boot loader, loads another boot loader. This is done when a Linux bootloader needs to start a Windows system.</p>
</blockquote>
<h2>GRUB</h2>
<p><strong>GRUB</strong> (<strong>GR</strong>and <strong>U</strong>nified <strong>B</strong>ootloader) started to replace the older LILO. The first version (1) is called Grub Legacy and started in 1999. The 2nd version started in 2005 and is a complete rewrite of version 1.</p>
<p>It's a menu-based system where you can choose which Kernel or chainloader to boot. It is also possible to edit the menus on the fly or give direct commands from a command line.</p>
<h3>Grub Legacy</h3>
<p>Usually the GRUB v1 (actually 0.9) is installed in <code>/boot/grub</code>. Its main configuration is in <code>/boot/grub/menu.lst</code> but nowadays some distros (including RedHat Based ones) link this to the <code>/boot/grub/grub.conf</code>.</p>
<p>A sample <code>menu.lst</code> / <code>grub.conf</code> file for GRUB legacy consists of two sections. The first section contains global configs and the 2nd part defines different kernel/initram or chainloader options.</p>
<p>The global configs are:</p>
<table>
<thead>
<tr>
<th align="left">Config</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">#</td>
<td align="left">Comment</td>
</tr>
<tr>
<td align="left">color</td>
<td align="left">Foreground and background colors for normal and active items</td>
</tr>
<tr>
<td align="left">default</td>
<td align="left">Which boot menu item is the default</td>
</tr>
<tr>
<td align="left">fallback</td>
<td align="left">Which boot menu should be used if the <em>default</em> fails</td>
</tr>
<tr>
<td align="left">hiddenmenu</td>
<td align="left">Hide the menu options</td>
</tr>
<tr>
<td align="left">splashimage</td>
<td align="left">Show this image in the background!</td>
</tr>
<tr>
<td align="left">timeout</td>
<td align="left">Wait this much and then start the default</td>
</tr>
<tr>
<td align="left">password</td>
<td align="left">Security is important! Will ask this password</td>
</tr>
<tr>
<td align="left">savedefault</td>
<td align="left">Remember the last booted item</td>
</tr>
</tbody>
</table>
<p>On the second part of the config, we have these:</p>
<table>
<thead>
<tr>
<th align="left">Config</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">title</td>
<td align="left">Defines the section name</td>
</tr>
<tr>
<td align="left">root</td>
<td align="left">Disk and partition where <code>/boot</code> directory is. In the form of (hddrive, partition), say (hd0, 0) or (hd0, msdos0)</td>
</tr>
<tr>
<td align="left">kernel</td>
<td align="left">Kernel image file name in <code>/boot</code></td>
</tr>
<tr>
<td align="left">initrd</td>
<td align="left">Initramfs file in <code>/boot</code></td>
</tr>
<tr>
<td align="left">rootnoverify</td>
<td align="left">Defines a non-Linux root partition</td>
</tr>
<tr>
<td align="left">chainloader</td>
<td align="left">Another file will act as stage 1 loader. Used for booting Windows systems</td>
</tr>
</tbody>
</table>
<p>Here you can see a sample of GRUB-Legacy config:</p>
<div class="highlight"><pre><span></span><code># grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#          root (hd0,5)
#          kernel /boot/vmlinuz-version ro root=/dev/sda6
#          initrd /boot/initrd-version.img
#boot=/dev/sda6
default=1
timeout=10
splashimage=(hd0,5)/boot/grub/splash.xpm.gz
#hiddenmenu
password --md5 $1$RW1VW/$4XGAklxB7/GJk0uO47Srx1
title Upgrade to Fedora 11 (Leonidas)
    kernel /boot/upgrade/vmlinuz preupgrade \
      repo=hd::/var/cache/yum/preupgrade stage2=\
      hd:UUID=8b4c62e7-2022-4288-8995-5eda92cd149b:/boot/upgrade/install.img \
      ks=hd:UUID=8b4c62e7-2022-4288-8995-5eda92cd149b:/boot/upgrade/ks.cfg
    initrd /boot/upgrade/initrd.img
title Fedora (2.6.26.8-57.fc8)
    root (hd0,5)
    kernel /boot/vmlinuz-2.6.26.8-57.fc8 ro root=LABEL=FEDORA8 rhgb quiet
    initrd /boot/initrd-2.6.26.8-57.fc8.img
title Fedora (2.6.26.6-49.fc8)
    root (hd0,5)
    kernel /boot/vmlinuz-2.6.26.6-49.fc8 ro root=LABEL=FEDORA8 rhgb quiet
    initrd /boot/initrd-2.6.26.6-49.fc8.img
title GRUB Menu
    rootnoverify (hd0,1)
    chainloader +1
title Windows
    rootnoverify (hd0,0)
    chainloader +1
</code></pre></div>

<h4>GRUB (legacy) commands</h4>
<p>After creating the configuration, you need to install the grub on a disk MBR. To do this you can use two different formats:</p>
<div class="highlight"><pre><span></span><code># grub-install /dev/fd0
# grub-install &#39;(fd0)&#39;
</code></pre></div>

<p>Just like any other boot manager, you can install grub on a CD, floppy, MBR (<code>/dev/sda</code>, <code>/dev/sdb</code>, ..) or a partition (<code>/dev/sdb2</code>, <code>/dev/sda6</code>, ..). But if you want to install it on anywhere other than the MBR, use a chainloader to point your boot sequence toward it.</p>
<p>If you needed to change or reconfigure anything during the startup, just press the <code>e</code> on that item and you'll get an interactive editing environment. Press <strong>Enter</strong> when done and <code>b</code> for boot.</p>
<h4>Interacting with GRUB Legacy</h4>
<p>If you press <code>c</code> on the grub menu, you will go into the <em>GRUB Command Line</em> or <em>GRUB shell</em>. There you can type commands like <code>root</code> and <code>kernel</code> and <code>initrd</code> and boot the system with <code>boot</code> or press the <code>Esc</code> key to return back to the menu. </p>
<h3>GRUB2</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/lB-1orohGA0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>This is the most common boot loader these days. On BIOS systems it is installed on <code>/boot/grub/</code> or <code>/boot/grub2/</code> and under UEFI it goes in <code>/boot/efi/EFI/distro-name/</code> (say <code>/boot/efi/EFI/fedora/</code>). GRUB2's configuration file is called <code>grub.cfg</code>.</p>
<p>Here is a simplified <code>grub.cfg</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">set</span><span class="w"> </span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;0&quot;</span>
<span class="n">menuentry</span><span class="w"> </span><span class="s2">&quot;Fedora&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">root</span><span class="o">=</span><span class="p">(</span><span class="n">hd0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">linux</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">arm64</span><span class="w"> </span><span class="n">ro</span><span class="w"> </span><span class="n">quiet</span>
<span class="w">  </span><span class="n">initrd</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="o">.</span><span class="n">img</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">arm64</span>
<span class="p">}</span>
<span class="n">menuentry</span><span class="w"> </span><span class="s2">&quot;Windows&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">chainloader</span><span class="w"> </span><span class="p">(</span><span class="n">hd1</span><span class="p">,</span><span class="n">msdos2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>

<p>As you can see, GRUB uses Linux-style numbering for partitions, so the first partition on the first hard disk is <code>(hd0,1)</code> or <code>(hd0,msdos1)</code> for DOS partitions or <code>(hd0,gpt1)</code> for GPT drives.</p>
<p>Here you can see some of the options:</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">menuentry</td>
<td align="left">Defines a new menuentry</td>
</tr>
<tr>
<td align="left">set root</td>
<td align="left">Defines the root where <code>/boot</code> located</td>
</tr>
<tr>
<td align="left">linux, linux16</td>
<td align="left">Defines the location of the Linux kernel on BIOS systems</td>
</tr>
<tr>
<td align="left">linuxefi</td>
<td align="left">Defines the Linux kernel on UEFI systems</td>
</tr>
<tr>
<td align="left">initrd</td>
<td align="left">Defines the initramfs image for BIOS systems</td>
</tr>
<tr>
<td align="left">initrdefi</td>
<td align="left">Defines the initramfs image for UEFI systems</td>
</tr>
</tbody>
</table>
<p>And here is a real-world <code>grub.cfg</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#</span>
<span class="c1"># DO NOT EDIT THIS FILE</span>
<span class="c1">#</span>
<span class="c1"># It is automatically generated by grub-mkconfig using templates</span>
<span class="c1"># from /etc/grub.d and settings from /etc/default/grub</span>
<span class="c1">#</span>

<span class="c1">### BEGIN /etc/grub.d/00_header ###</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="o">$</span><span class="n">prefix</span><span class="o">/</span><span class="n">grubenv</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">have_grubenv</span><span class="o">=</span><span class="bp">true</span>
<span class="w">  </span><span class="n">load_env</span>
<span class="n">fi</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;${next_entry}&quot;</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">then</span>
<span class="w">   </span><span class="n">set</span><span class="w"> </span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;${next_entry}&quot;</span>
<span class="w">   </span><span class="n">set</span><span class="w"> </span><span class="n">next_entry</span><span class="o">=</span>
<span class="w">   </span><span class="n">save_env</span><span class="w"> </span><span class="n">next_entry</span>
<span class="w">   </span><span class="n">set</span><span class="w"> </span><span class="n">boot_once</span><span class="o">=</span><span class="bp">true</span>
<span class="k">else</span>
<span class="w">   </span><span class="n">set</span><span class="w"> </span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;0&quot;</span>
<span class="n">fi</span>

<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="s2">&quot;${feature_menuentry_id}&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">menuentry_id_option</span><span class="o">=</span><span class="s2">&quot;--id&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="n">menuentry_id_option</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="n">fi</span>

<span class="k">export</span><span class="w"> </span><span class="n">menuentry_id_option</span>

<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;${prev_saved_entry}&quot;</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">saved_entry</span><span class="o">=</span><span class="s2">&quot;${prev_saved_entry}&quot;</span>
<span class="w">  </span><span class="n">save_env</span><span class="w"> </span><span class="n">saved_entry</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">prev_saved_entry</span><span class="o">=</span>
<span class="w">  </span><span class="n">save_env</span><span class="w"> </span><span class="n">prev_saved_entry</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">boot_once</span><span class="o">=</span><span class="bp">true</span>
<span class="n">fi</span>

<span class="n">function</span><span class="w"> </span><span class="n">savedefault</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">z</span><span class="w"> </span><span class="s2">&quot;${boot_once}&quot;</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">    </span><span class="n">saved_entry</span><span class="o">=</span><span class="s2">&quot;${chosen}&quot;</span>
<span class="w">    </span><span class="n">save_env</span><span class="w"> </span><span class="n">saved_entry</span>
<span class="w">  </span><span class="n">fi</span>
<span class="p">}</span>
<span class="n">function</span><span class="w"> </span><span class="n">load_video</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_all_video_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">all_video</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">efi_gop</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">efi_uga</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">ieee1275_fb</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">vbe</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">vga</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">video_bochs</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">video_cirrus</span>
<span class="w">  </span><span class="n">fi</span>
<span class="p">}</span>

<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_default_font_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">then</span>
<span class="w">   </span><span class="n">font</span><span class="o">=</span><span class="n">unicode</span>
<span class="k">else</span>
<span class="n">insmod</span><span class="w"> </span><span class="n">part_gpt</span>
<span class="n">insmod</span><span class="w"> </span><span class="n">ext2</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_platform_search_hint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w">  </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="k">else</span>
<span class="w">  </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w"> </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="n">fi</span>
<span class="w">    </span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;/usr/share/grub/unicode.pf2&quot;</span>
<span class="n">fi</span>

<span class="k">if</span><span class="w"> </span><span class="n">loadfont</span><span class="w"> </span><span class="o">$</span><span class="n">font</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">gfxmode</span><span class="o">=</span><span class="n">auto</span>
<span class="w">  </span><span class="n">load_video</span>
<span class="w">  </span><span class="n">insmod</span><span class="w"> </span><span class="n">gfxterm</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">locale_dir</span><span class="o">=$</span><span class="n">prefix</span><span class="o">/</span><span class="n">locale</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">lang</span><span class="o">=</span><span class="n">en_US</span>
<span class="w">  </span><span class="n">insmod</span><span class="w"> </span><span class="n">gettext</span>
<span class="n">fi</span>
<span class="n">terminal_output</span><span class="w"> </span><span class="n">gfxterm</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;${recordfail}&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="mi">30</span>
<span class="k">else</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_timeout_style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">then</span>
<span class="w">    </span><span class="n">set</span><span class="w"> </span><span class="n">timeout_style</span><span class="o">=</span><span class="n">menu</span>
<span class="w">    </span><span class="n">set</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span>
<span class="w">  </span><span class="c1"># Fallback normal timeout code in case the timeout_style feature is</span>
<span class="w">  </span><span class="c1"># unavailable.</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">set</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span>
<span class="w">  </span><span class="n">fi</span>
<span class="n">fi</span>
<span class="c1">### END /etc/grub.d/00_header ###</span>

<span class="c1">### BEGIN /etc/grub.d/05_debian_theme ###</span>
<span class="n">insmod</span><span class="w"> </span><span class="n">part_gpt</span>
<span class="n">insmod</span><span class="w"> </span><span class="n">ext2</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_platform_search_hint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w">  </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="k">else</span>
<span class="w">  </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w"> </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="n">fi</span>
<span class="n">insmod</span><span class="w"> </span><span class="n">png</span>
<span class="k">if</span><span class="w"> </span><span class="n">background_image</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">desktop</span><span class="o">-</span><span class="n">base</span><span class="o">/</span><span class="n">homeworld</span><span class="o">-</span><span class="n">theme</span><span class="o">/</span><span class="n">grub</span><span class="o">/</span><span class="n">grub</span><span class="o">-</span><span class="mi">4</span><span class="n">x3</span><span class="o">.</span><span class="n">png</span><span class="p">;</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">color_normal</span><span class="o">=</span><span class="n">white</span><span class="o">/</span><span class="n">black</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">color_highlight</span><span class="o">=</span><span class="n">black</span><span class="o">/</span><span class="n">white</span>
<span class="k">else</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">menu_color_normal</span><span class="o">=</span><span class="n">cyan</span><span class="o">/</span><span class="n">blue</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">menu_color_highlight</span><span class="o">=</span><span class="n">white</span><span class="o">/</span><span class="n">blue</span>
<span class="n">fi</span>
<span class="c1">### END /etc/grub.d/05_debian_theme ###</span>

<span class="c1">### BEGIN /etc/grub.d/10_linux ###</span>
<span class="n">function</span><span class="w"> </span><span class="n">gfxmode</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">set</span><span class="w"> </span><span class="n">gfxpayload</span><span class="o">=</span><span class="s2">&quot;${1}&quot;</span>
<span class="p">}</span>
<span class="n">set</span><span class="w"> </span><span class="n">linux_gfx_mode</span><span class="o">=</span>
<span class="k">export</span><span class="w"> </span><span class="n">linux_gfx_mode</span>
<span class="n">menuentry</span><span class="w"> </span><span class="s1">&#39;Debian GNU/Linux&#39;</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">debian</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">gnu</span><span class="o">-</span><span class="n">linux</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">gnu</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">$</span><span class="n">menuentry_id_option</span><span class="w"> </span><span class="s1">&#39;gnulinux-simple-df2d9e14-f1e9-4b1b-95d4-0167caa2461e&#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">load_video</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">gzio</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">grub_platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xxen</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">insmod</span><span class="w"> </span><span class="n">xzio</span><span class="p">;</span><span class="w"> </span><span class="n">insmod</span><span class="w"> </span><span class="n">lzopio</span><span class="p">;</span><span class="w"> </span><span class="n">fi</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">part_gpt</span>
<span class="w">    </span><span class="n">insmod</span><span class="w"> </span><span class="n">ext2</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_platform_search_hint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">      </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w">  </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w"> </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="w">    </span><span class="n">fi</span>
<span class="w">    </span><span class="n">echo</span><span class="w">    </span><span class="s1">&#39;Loading Linux 5.10.0-9-arm64 ...&#39;</span>
<span class="w">    </span><span class="n">linux</span><span class="w">   </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">arm64</span><span class="w"> </span><span class="n">root</span><span class="o">=</span><span class="n">UUID</span><span class="o">=</span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span><span class="w"> </span><span class="n">ro</span><span class="w">  </span><span class="n">quiet</span>
<span class="w">    </span><span class="n">echo</span><span class="w">    </span><span class="s1">&#39;Loading initial ramdisk ...&#39;</span>
<span class="w">    </span><span class="n">initrd</span><span class="w">  </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="o">.</span><span class="n">img</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">arm64</span>
<span class="p">}</span>
<span class="n">submenu</span><span class="w"> </span><span class="s1">&#39;Advanced options for Debian GNU/Linux&#39;</span><span class="w"> </span><span class="o">$</span><span class="n">menuentry_id_option</span><span class="w"> </span><span class="s1">&#39;gnulinux-advanced-df2d9e14-f1e9-4b1b-95d4-0167caa2461e&#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">menuentry</span><span class="w"> </span><span class="s1">&#39;Debian GNU/Linux, with Linux 5.10.0-9-arm64&#39;</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">debian</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">gnu</span><span class="o">-</span><span class="n">linux</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">gnu</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">$</span><span class="n">menuentry_id_option</span><span class="w"> </span><span class="s1">&#39;gnulinux-5.10.0-9-arm64-advanced-df2d9e14-f1e9-4b1b-95d4-0167caa2461e&#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">load_video</span>
<span class="w">        </span><span class="n">insmod</span><span class="w"> </span><span class="n">gzio</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">grub_platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xxen</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">insmod</span><span class="w"> </span><span class="n">xzio</span><span class="p">;</span><span class="w"> </span><span class="n">insmod</span><span class="w"> </span><span class="n">lzopio</span><span class="p">;</span><span class="w"> </span><span class="n">fi</span>
<span class="w">        </span><span class="n">insmod</span><span class="w"> </span><span class="n">part_gpt</span>
<span class="w">        </span><span class="n">insmod</span><span class="w"> </span><span class="n">ext2</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_platform_search_hint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">          </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w">  </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">          </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w"> </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="w">        </span><span class="n">fi</span>
<span class="w">        </span><span class="n">echo</span><span class="w">    </span><span class="s1">&#39;Loading Linux 5.10.0-9-arm64 ...&#39;</span>
<span class="w">        </span><span class="n">linux</span><span class="w">   </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">arm64</span><span class="w"> </span><span class="n">root</span><span class="o">=</span><span class="p">(</span><span class="n">hd0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">ro</span><span class="w">  </span><span class="n">quiet</span>
<span class="w">        </span><span class="n">echo</span><span class="w">    </span><span class="s1">&#39;Loading initial ramdisk ...&#39;</span>
<span class="w">        </span><span class="n">initrd</span><span class="w">  </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="o">.</span><span class="n">img</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="n">arm64</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">menuentry</span><span class="w"> </span><span class="s1">&#39;Debian GNU/Linux, with Linux 5.10.0-8-arm64 (recovery mode)&#39;</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">debian</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">gnu</span><span class="o">-</span><span class="n">linux</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">gnu</span><span class="w"> </span><span class="o">--</span><span class="k">class</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">$</span><span class="n">menuentry_id_option</span><span class="w"> </span><span class="s1">&#39;gnulinux-5.10.0-8-arm64-recovery-df2d9e14-f1e9-4b1b-95d4-0167caa2461e&#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">load_video</span>
<span class="w">        </span><span class="n">insmod</span><span class="w"> </span><span class="n">gzio</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">grub_platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xxen</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">insmod</span><span class="w"> </span><span class="n">xzio</span><span class="p">;</span><span class="w"> </span><span class="n">insmod</span><span class="w"> </span><span class="n">lzopio</span><span class="p">;</span><span class="w"> </span><span class="n">fi</span>
<span class="w">        </span><span class="n">insmod</span><span class="w"> </span><span class="n">part_gpt</span>
<span class="w">        </span><span class="n">insmod</span><span class="w"> </span><span class="n">ext2</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">feature_platform_search_hint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xy</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">          </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w">  </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">          </span><span class="n">search</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">floppy</span><span class="w"> </span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">uuid</span><span class="w"> </span><span class="o">--</span><span class="n">set</span><span class="o">=</span><span class="n">root</span><span class="w"> </span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span>
<span class="w">        </span><span class="n">fi</span>
<span class="w">        </span><span class="n">echo</span><span class="w">    </span><span class="s1">&#39;Loading Linux 5.10.0-8-arm64 ...&#39;</span>
<span class="w">        </span><span class="n">linux</span><span class="w">   </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">arm64</span><span class="w"> </span><span class="n">root</span><span class="o">=</span><span class="n">UUID</span><span class="o">=</span><span class="n">df2d9e14</span><span class="o">-</span><span class="n">f1e9</span><span class="o">-</span><span class="mi">4</span><span class="n">b1b</span><span class="o">-</span><span class="mi">95</span><span class="n">d4</span><span class="o">-</span><span class="mi">0167</span><span class="n">caa2461e</span><span class="w"> </span><span class="n">ro</span><span class="w"> </span><span class="n">single</span><span class="w"> </span>
<span class="w">        </span><span class="n">echo</span><span class="w">    </span><span class="s1">&#39;Loading initial ramdisk ...&#39;</span>
<span class="w">        </span><span class="n">initrd</span><span class="w">  </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="o">.</span><span class="n">img</span><span class="o">-</span><span class="mf">5.10</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">arm64</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">### END /etc/grub.d/10_linux ###</span>

<span class="c1">### BEGIN /etc/grub.d/20_linux_xen ###</span>

<span class="c1">### END /etc/grub.d/20_linux_xen ###</span>

<span class="c1">### BEGIN /etc/grub.d/30_os-prober ###</span>
<span class="c1">### END /etc/grub.d/30_os-prober ###</span>

<span class="c1">### BEGIN /etc/grub.d/30_uefi-firmware ###</span>
<span class="n">menuentry</span><span class="w"> </span><span class="s1">&#39;System setup&#39;</span><span class="w"> </span><span class="o">$</span><span class="n">menuentry_id_option</span><span class="w"> </span><span class="s1">&#39;uefi-firmware&#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">fwsetup</span>
<span class="p">}</span>
<span class="c1">### END /etc/grub.d/30_uefi-firmware ###</span>

<span class="c1">### BEGIN /etc/grub.d/40_custom ###</span>
<span class="c1"># This file provides an easy way to add custom menu entries.  Simply type the</span>
<span class="c1"># menu entries you want to add after this comment.  Be careful not to change</span>
<span class="c1"># the &#39;exec tail&#39; line above.</span>
<span class="c1">### END /etc/grub.d/40_custom ###</span>

<span class="c1">### BEGIN /etc/grub.d/41_custom ###</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w">  </span><span class="o">$</span><span class="p">{</span><span class="n">config_directory</span><span class="p">}</span><span class="o">/</span><span class="n">custom</span><span class="o">.</span><span class="n">cfg</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">source</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">config_directory</span><span class="p">}</span><span class="o">/</span><span class="n">custom</span><span class="o">.</span><span class="n">cfg</span>
<span class="k">elif</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">z</span><span class="w"> </span><span class="s2">&quot;${config_directory}&quot;</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w">  </span><span class="o">$</span><span class="n">prefix</span><span class="o">/</span><span class="n">custom</span><span class="o">.</span><span class="n">cfg</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">  </span><span class="n">source</span><span class="w"> </span><span class="o">$</span><span class="n">prefix</span><span class="o">/</span><span class="n">custom</span><span class="o">.</span><span class="n">cfg</span><span class="p">;</span>
<span class="n">fi</span>
<span class="c1">### END /etc/grub.d/41_custom ###</span>
</code></pre></div>

<h4>GRUB2 commands</h4>
<p>The installation is done with <code>grub-install /dev/sda</code> and after changing the config files, you need to issue  <code>grub2-mkconfig</code> or <code>grub-mkconfig</code>. It reads the configuration files from <code>/etc/grub.d/</code> and <code>/etc/default/grub/</code> and create the <code>grub.cfg</code> file based on them. You run it like this:</p>
<div class="highlight"><pre><span></span><code>grub2-mkconfig &gt; /boot/grub2/grub.cfg
</code></pre></div>

<p>or </p>
<div class="highlight"><pre><span></span><code>grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre></div>

<p>There is also a command called <code>update-grub</code> as a frontend to <code>grub-mkconfig</code> which runs <code>grub-mkconfig -o /boot/grub/grub.cfg</code></p>
<blockquote>
<p>Please note that on some modern distros, you have both <code>grub</code> and <code>grub2</code> commands available for compatibility reasons, and one links to the other.</p>
</blockquote>
<h4>Interacting with GRUB2</h4>
<p>If you press <code>c</code> on the grub menu, you will go into the <em>GRUB Command Line</em> or <em>GRUB shell</em>. There you can type commands like <code>root</code> and <code>kernel</code> and <code>initrd</code> and boot the system with <code>boot</code> or press the <code>Esc</code> key to return back to the menu. </p>
<h3>Kernel boot parameters</h3>
<p>In the above configs, we sent some parameters to the kernel like this:</p>
<div class="highlight"><pre><span></span><code>        linux   /boot/vmlinuz-5.10.0-9-arm64 root=/dev/sda1 ro  quiet
</code></pre></div>

<p>This tells the kernel to boot in <em>ReadOnly</em> mode and does not show lots of logs during the boot (<em>quiet</em>).</p>
<p>These are some of the other options you may use:</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">console=</td>
<td align="left">Set the console</td>
</tr>
<tr>
<td align="left">debug</td>
<td align="left">Start in debug mode</td>
</tr>
<tr>
<td align="left">init=</td>
<td align="left">Run an specific program instead of the default init</td>
</tr>
<tr>
<td align="left">initrd=</td>
<td align="left">Use this initrd</td>
</tr>
<tr>
<td align="left">ro</td>
<td align="left">Mount the root filesystem read only</td>
</tr>
<tr>
<td align="left">rw</td>
<td align="left">Mount the root filesystem for read and write</td>
</tr>
<tr>
<td align="left">root=</td>
<td align="left">Use this as the root filesystem</td>
</tr>
<tr>
<td align="left">selinux</td>
<td align="left">Disable <code>selinux</code> on boot</td>
</tr>
<tr>
<td align="left">single,S,1,Single</td>
<td align="left">Boot in single user mode for troubleshooting (SysV)</td>
</tr>
<tr>
<td align="left">systemd.unit=</td>
<td align="left">Boot in this systemd target</td>
</tr>
</tbody>
</table>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1021-design-hard-disk-layout.html">â 102.1 Design hard disk layout</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1023-manage-shared-libraries.html">102.3 Manage shared libraries â</a>
                </td>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">19</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">22</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>