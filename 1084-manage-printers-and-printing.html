<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 102, LPIC1-102-500, LPIC1, " />

<meta property="og:title" content="108.4 Manage printers and printing "/>
<meta property="og:url" content="./1084-manage-printers-and-printing.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="108.4 Manage printers and printing ">
<meta name="twitter:description" content="">

        <title>108.4 Manage printers and printing  · lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1084-manage-printers-and-printing.html">
                108.4 Manage printers and printing
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <h2>108.4 Manage printers and printing</h2>
<div class="alert alert-danger" role="alert">
  This chapter is still a Work In Progress. Do not rely on it for LPIC version 500 exam. Will be updated in a few weeks.
</div>

<p><em>Weight: 2</em></p>
<p>Candidates should be able to manage print queues and user print jobs using CUPS and the LPD compatibility interface.</p>
<h3>Key Knowledge Areas</h3>
<ul>
<li>Basic CUPS configuration (for local and remote printers).</li>
<li>Manage user print queues.</li>
<li>Troubleshoot general printing problems.</li>
<li>Add and remove jobs from configured printer queues.</li>
</ul>
<h3>Terms and Utilities</h3>
<ul>
<li>CUPS configuration files, tools and utilities</li>
<li>/etc/cups/</li>
<li>lpd legacy interface (lpr, lprm, lpq)</li>
</ul>
<h3>CUPS</h3>
<p>Most Linux distros use CUPS for printing. CUPS stands for Common Unix Printing System. There are different interfaces for CUPS link command line tools, web based interface and GUIs. CUPS is designed to simplify the printing on various printers from different manufactures.</p>
<h4>CUPS web interface</h4>
<p>The general way to access the CUPS configuration and info page is going to the servers IP on port <strong>631</strong> from a browser. That will be <strong>localhost:631</strong> or <strong>127.0.0.1:631</strong> from your browser.</p>
<p><img alt="CUPs printing system" src="../.gitbook/assets/cups.png"></p>
<p>Important parts on this webpage are:</p>
<p>|Jobs tab|to check the jobs the CUPS is handling|<br>
|Administration|For adding printers, managing jobs and configuring the CUPS server|<br>
|Printers|Show the printers|</p>
<blockquote>
<p>as soon as you push the Add Printer button, you will need to give CUPS admin user password</p>
</blockquote>
<p>Suggested Activity: Visit your CUPS web interface and add a printer</p>
<p>Good news is that the CUPS has most of the common printer drivers installed. You just need to choose the printer from the dropdown menu.</p>
<h4>configuration files</h4>
<p>As any other linux program, CUPS saves its configuration at <code>/etc</code> directory.</p>
<div class="highlight"><pre><span></span><code># ls /etc/cups
cups-browsed.conf  interfaces  raw.types  subscriptions.conf
cupsd.conf         ppd         snmp.conf  subscriptions.conf.O
cups-files.conf    raw.convs   ssl
</code></pre></div>

<p>One important file is <code>cupsd.conf</code>. Have a look at it; it is very easy to understand. For example the <code>Listen localhost:631</code> line tells the CUPS to listen on localhost port 631.</p>
<p>All the printer data is saved at <code>/etc/cups/printers.conf</code>. The web interface or any other GUI is actually editing this file.</p>
<div class="highlight"><pre><span></span><code># Printer configuration file for CUPS v2.1.0
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
&lt;DefaultPrinter Apple-Dot-Matrix&gt;
UUID urn:uuid:0f6c2f2b-6338-388a-76de-09f2ef1994d5
Info Apple Dot Matrix
Location Fake Location
MakeModel Apple Dot Matrix Foomatic/appledmp (recommended)
DeviceURI ipp://fakeprinter/
State Idle
StateTime 1453402271
ConfigTime 1453402271
Type 8433668
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy retry-job
&lt;/DefaultPrinter&gt;
</code></pre></div>

<h4>legacy tools</h4>
<p>Just like the MTA programs, CUPS support all the legacy command line programs too.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">command</th>
<th style="text-align: left;">usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">lpr</td>
<td style="text-align: left;">print a file</td>
</tr>
<tr>
<td style="text-align: left;">lpq</td>
<td style="text-align: left;">show print queue/jobs</td>
</tr>
<tr>
<td style="text-align: left;">lprm</td>
<td style="text-align: left;">rm/remove a file from priner queue</td>
</tr>
<tr>
<td style="text-align: left;">lpc</td>
<td style="text-align: left;">printer control / troubleshooting program</td>
</tr>
</tbody>
</table>
<p><strong>lpq</strong></p>
<p>The <strong>q</strong> is for <strong>queue</strong> therefor <code>lpq</code> shows the printer queue and is used when you want to see the jobs. If you use the <code>-a</code> switch, the lpq will show the jobs of <strong>all</strong> printers. Alternatively you can use the <code>-P</code> switch to show the jobs of a specific printer. So the following command will show the jobs of a printer called Apple-Dot-Matrix:</p>
<div class="highlight"><pre><span></span><code># lpq -PApple-Dot-Matrix
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File(s)                         Total Size
active  unknown 1       unknown                         7168 bytes
1st     unknown 2       unknown                         2048 bytes
</code></pre></div>

<blockquote>
<p>It is strange but there should not be ANY space between <code>-P</code> and the printers name</p>
</blockquote>
<p><strong>lpr</strong></p>
<p>This command is used to send a job to a printer. Again the printer is specified by <code>-P</code>.</p>
<div class="highlight"><pre><span></span><code>$ lpr -PApple-Dot-Matrix for_print.txt
 lpq
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File(s)                         Total Size
active  jadi    1       Untitled Document 1             7168 bytes
1st     jadi    2       Untitled1                       2048 bytes
2nd     jadi    3       for_print.txt                   1024 bytes
</code></pre></div>

<blockquote>
<p>If no printer is specified, the default printer will be used</p>
</blockquote>
<p><strong>lprm</strong></p>
<p>The <em>rm</em> is for <em>remove</em> so the <code>lprm</code> will remove jobs from the queue. You need to provide the <strong>Job ID</strong> to this command.</p>
<div class="highlight"><pre><span></span><code>$ lpq
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File(s)                         Total Size
active  jadi    1       Untitled Document 1             7168 bytes
1st     jadi    2       Untitled1                       2048 bytes
2nd     jadi    3       for_print.txt                   1024 bytes
jadi@funlife:/tmp$ lprm 2
jadi@funlife:/tmp$ lpq
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File(s)                         Total Size
active  jadi    1       Untitled Document 1             7168 bytes
1st     jadi    3       for_print.txt                   1024 bytes
</code></pre></div>

<blockquote>
<p>Only root can remove other peoples print jobs</p>
</blockquote>
<p>If you need to remove ALL the jobs of a specific printer, you can go with <code>-Pprinter_name -</code>. Yes! that is only one dash (<code>-</code>) after the printer name; that's why this is called a legacy command.</p>
<blockquote>
<p>the <code>lprm -</code> will remove all the print jobs</p>
</blockquote>
<p><strong>lpc</strong></p>
<p>Here, the <strong>c</strong> is for <strong>control</strong>. <code>lpc</code> lets you check the status (via <code>lpc status</code>) and troubleshoot your printers.</p>
<div class="highlight"><pre><span></span><code>$ lpc status
Apple-Dot-Matrix:
    printer is on device &#39;ipp&#39; speed -1
    queuing is enabled
    printing is enabled
    2 entries
    daemon present
</code></pre></div>

<p>Here,</p>
<ul>
<li><strong>queuing is enabled</strong> tell us that the queue can accept new print jobs. If the queue is disabled, you can not even send new jobs to the printer.</li>
<li><strong>printing is enabled</strong> means that the printer is actually can print on the paper. This will be on the disable state if the printer is out of ink or paper or experiencing a paper jam.</li>
</ul>
<p>If you are having problems with your printer or need to prevent it from accepting new jobs or let it accept jobs but not print, these four commands will let you achieve your needs:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">command</th>
<th style="text-align: left;">usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">cupsaccept</td>
<td style="text-align: left;">tells the printer queue to accept new jobs</td>
</tr>
<tr>
<td style="text-align: left;">cupsreject</td>
<td style="text-align: left;">tells the printer to reject any new job</td>
</tr>
<tr>
<td style="text-align: left;">cupsenable</td>
<td style="text-align: left;">enables the actual/physical printing of the jobs</td>
</tr>
<tr>
<td style="text-align: left;">cupsdisable</td>
<td style="text-align: left;">disables the physical printing of the jobs</td>
</tr>
</tbody>
</table>
<blockquote>
<p>In all cases you have to provide the printer name of the printer. it is also possible to provide a reason using <code>-r</code> switch.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>$ cupsdisable Apple-Dot-Matrix -r &quot;need more paper&quot;
$ lpc status
Apple-Dot-Matrix:
    printer is on device &#39;ipp&#39; speed -1
    queuing is enabled
    printing is disabled
    2 entries
    daemon present
</code></pre></div>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1083-mail-transfer-agent-mta-basics.html">← 108.3 Mail Transfer Agent (MTA) basics</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1091-fundamentals-of-internet-protocols.html">109.1 Fundamentals of internet protocols →</a>
                </td>
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#102-ref">102
                    <span class="superscript">20</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-102-500-ref">LPIC1-102-500
                    <span class="superscript">20</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>