<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="103.4 Use streams, pipes, and redirects "/>
<meta property="og:url" content="./1034-use-streams-pipes-and-redirects.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="103.4 Use streams, pipes, and redirects ">
<meta name="twitter:description" content="">

        <title>103.4 Use streams, pipes, and redirects  · lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">LPIC1 Book</a></li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1034-use-streams-pipes-and-redirects.html">
                103.4 Use streams, pipes, and redirects
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><em>Weight: 4</em></p>
<p>Candidates should be able to redirect streams and connect them to efficiently process textual data. Tasks include redirecting standard input, standard output, and standard error, piping the output of one command to the input of another command, using the output of one command as arguments to another command, and sending output to both stdout and a file.</p>
<h2>Objectives</h2>
<ul>
<li>Redirecting standard input, standard output, and standard error.</li>
<li>Pipe the output of one command to the input of another command.</li>
<li>Use the output of one command as arguments to another command.</li>
<li>Send output to both stdout and a file.</li>
</ul>
<h2>Terms</h2>
<ul>
<li>tee</li>
<li>xargs</li>
</ul>
<p>These features help us to control the input/output of the commands and do things like saving the output of a command to a file, getting the input of a command from another command, or separating the normal output from errors. We've already used them in previous sections but let's learn more and deepen our understanding of these.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/PeUhwMoSCko" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2>Redirecting standard IO</h2>
<p>On a Linux system, most shells use streams for input and output. These streams can be from (and toward) various things including keyboards, block devices (hards, USB sticks, ..), files, and ...</p>
<p>We have 3 different standard streams:</p>
<ol start="0">
<li><b>STDIN</b> is the standard input stream, which provides input to a command.</li>
<li><b>STDOUT</b> is the standard output stream, which includes the output of a command.</li>
<li><b>STDERR</b> is the standard error stream, which includes the error output of a command.</li>
</ol>

<blockquote>
<p>The <code>0</code>, <code>1</code> &amp; <code>2</code> numbering, indicates the <strong><em>STDIN</em></strong>, <strong><em>STDOUT</em></strong> and <strong>*STDERR</strong> accordingly. For example, if you want to redirect the stderror, you can use 2&gt; and the STDERR will be redirected.</p>
</blockquote>
<p>These are the other redirections you can use:</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>&gt;</td>
<td>Redirect STDOUT to a file; Overwrite if exists</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>Redirect STDOUT to a file; Append if exists</td>
</tr>
<tr>
<td>2&gt;</td>
<td>Redirect STDERR to a file; Overwrite if exists</td>
</tr>
<tr>
<td>2&gt;&gt;</td>
<td>Redirect STDERR to a file; Append if exists</td>
</tr>
<tr>
<td>&amp;&gt;</td>
<td>Redirect both STDOUT and STDERR; Overwrite if exists</td>
</tr>
<tr>
<td>&amp;&gt;&gt;</td>
<td>Redirect both STDOUT and STDERR; Append if exists</td>
</tr>
<tr>
<td>&lt;</td>
<td>Redirect STDIN from a file</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>Redirect STDIN from the file and send the STDOUT to it</td>
</tr>
</tbody>
</table>
<p></br>
Some examples: </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls
bob<span class="w"> </span>jack<span class="w">    </span>jadi<span class="w">    </span>linus<span class="w">   </span>sara<span class="w"> </span>who_uses_what.txt
$<span class="w"> </span>ls<span class="w"> </span>x*
ls:<span class="w"> </span>x*:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
$<span class="w"> </span>ls<span class="w"> </span>j*
jack<span class="w">    </span>jadi
$<span class="w"> </span>ls<span class="w"> </span>j*<span class="w"> </span>x*<span class="w"> </span>&gt;<span class="w"> </span>output<span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>errors
$<span class="w"> </span>cat<span class="w"> </span>output
jack
jadi
$<span class="w"> </span>cat<span class="w"> </span>errors
ls:<span class="w"> </span>x*:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
$<span class="w"> </span>cat<span class="w"> </span>who_uses_what.txt
jadi,<span class="w"> </span>fedora
linux,<span class="w"> </span>fedora
bob,<span class="w"> </span>ubuntu
jack,<span class="w"> </span>arch
sara,<span class="w"> </span>fedora
$<span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39; &#39;</span>,<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>&lt;<span class="w"> </span>who_uses_what.txt
tr:<span class="w"> </span>empty<span class="w"> </span>string2
$<span class="w"> </span>cat<span class="w"> </span>who
$<span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39;,&#39;</span>,<span class="w"> </span><span class="s1">&#39;|&#39;</span><span class="w"> </span>&lt;<span class="w"> </span>who_uses_what.txt
jadi<span class="p">|</span><span class="w"> </span>fedora
linux<span class="p">|</span><span class="w"> </span>fedora
bob<span class="p">|</span><span class="w"> </span>ubuntu
jack<span class="p">|</span><span class="w"> </span>arch
sara<span class="p">|</span><span class="w"> </span>fedora
</code></pre></div>

<p>It is also possible to use <code>&amp;1</code> and <code>&amp;2</code> and <code>&amp;0</code> to refer to the <strong>target</strong> of STDOUT, STDERR &amp; STDIN. In this case <code>ls &gt; file1 2&gt;&amp;1</code> means <em>redirect output to file1 and output stderr to same place as stdout (file1)</em></p>
<blockquote>
<p>Be careful! <code>ls 2&gt;&amp;1 &gt; file1</code> means <em>print stderr to the current location of stdout (terminal) and then change the stdout to file1</em></p>
</blockquote>
<h4>sending to null</h4>
<p>In Linux <strong>/dev/null</strong> device works like an abyss. You can send anything there and it disappears without being any burden on your system. So it is normal to say:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>j*<span class="w"> </span>x*<span class="w"> </span>&gt;<span class="w"> </span>file1
ls:<span class="w"> </span>x*:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
$<span class="w"> </span>ls<span class="w"> </span>j*<span class="w"> </span>x*<span class="w"> </span>&gt;<span class="w"> </span>file1<span class="w"> </span><span class="m">2</span>&gt;/dev/null
$<span class="w"> </span>cat<span class="w"> </span>file1
jack
jadi
</code></pre></div>

<h4>here-documents</h4>
<p>Many shells have here-documents (also called here-docs) as a way of input. You use <code>&lt;&lt;</code> and a <code>WORD</code> and then whatever you input is considered stdin till you give only the WORD in one line.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="s1">&#39;.&#39;</span><span class="w"> </span><span class="s">&lt;&lt; END_OF_DATA</span>
<span class="s">&gt; this is a line</span>
<span class="s">&gt; and then this</span>
<span class="s">&gt;</span>
<span class="s">&gt; we&#39;ll still type</span>
<span class="s">&gt; and,</span>
<span class="s">&gt; done!</span>
<span class="s">&gt; END_OF_DATA</span>
this.is.a.line
and.then.this

we<span class="err">&#39;</span>ll.still.type
and,
<span class="k">done</span>!
</code></pre></div>

<blockquote>
<p>Here-Documents are very useful if you are writing scripts and automated tasks.</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/j3L_7Wxcl0U" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3>Pipes</h3>
<p>With the pipe (<code>|</code>), you can redirect STDOUT, STDIN, and STDERR between multiple commands all on one command line. When you do <code>command1 | command2</code>; command1, is executed but its STDOUT is redirected as STDIN into the COMMAND2. </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>who_uses_what.txt
jadi,<span class="w"> </span>fedora
linux,<span class="w"> </span>fedora
bob,<span class="w"> </span>ubuntu
jack,<span class="w"> </span>arch
sara,<span class="w"> </span>fedora
$<span class="w"> </span>cut<span class="w"> </span>-f2<span class="w"> </span>-d,<span class="w"> </span>who_uses_what.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/ //g&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w">  </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-nr
<span class="w">   </span><span class="m">3</span><span class="w"> </span>fedora
<span class="w">   </span><span class="m">1</span><span class="w"> </span>ubuntu
<span class="w">   </span><span class="m">1</span><span class="w"> </span>arch
</code></pre></div>

<blockquote>
<p>If you need to start your pipeline with the contents of a file, start with <code>cat filename | ...</code> or use a <code>&lt;</code> stdin redirect.</p>
</blockquote>
<p>Pipes are one of the super strong &amp; super amazing features in the UNIX world. They let you create <em>new</em> tools by combining tools that do atomic things. As an example, check this out:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/86V5amp1u7U" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3>xargs</h3>
<p>The xargs utility reads space, tab, newline and end-of-file delimited strings from the standard input and executes the provided utility with the strings as their arguments.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls
bob<span class="w">         </span>file1<span class="w">           </span>jadi<span class="w">            </span>output<span class="w">          </span>who_uses_what.txt
errors<span class="w">          </span>jack<span class="w">            </span>linus<span class="w">           </span>sara
$<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>these<span class="w"> </span>are<span class="w"> </span>files:
these<span class="w"> </span>are<span class="w"> </span>files:<span class="w"> </span>bob<span class="w"> </span>errors<span class="w"> </span>file1<span class="w"> </span>jack<span class="w"> </span>jadi<span class="w"> </span>linus<span class="w"> </span>output<span class="w"> </span>sara<span class="w"> </span>who_uses_what.txt
</code></pre></div>

<blockquote>
<p>if you do not give any command to the <code>xargs</code> , the echo will be the default command. </p>
</blockquote>
<p>One common switch is <code>-I</code>. This is useful if you need to pass stdin arguments in the middle (or even start) of your commands. Use it like this: <code>xargs -I SOMETHING echo here is SOMETHING end</code>:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>who_uses_what.txt
jadi,<span class="w"> </span>fedora
linus,<span class="w"> </span>fedora
bob,<span class="w"> </span>ubuntu
jack,<span class="w"> </span>arch
sara,<span class="w"> </span>fedora
$<span class="w"> </span>cat<span class="w"> </span>who_uses_what.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>DATA<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span>DATA<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>choice.
name<span class="w"> </span>is<span class="w"> </span>jadi,<span class="w"> </span>fedora<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>choice.
name<span class="w"> </span>is<span class="w"> </span>linus,<span class="w"> </span>fedora<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>choice.
name<span class="w"> </span>is<span class="w"> </span>bob,<span class="w"> </span>ubuntu<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>choice.
name<span class="w"> </span>is<span class="w"> </span>jack,<span class="w"> </span>arch<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>choice.
name<span class="w"> </span>is<span class="w"> </span>sara,<span class="w"> </span>fedora<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>choice.
</code></pre></div>

<p>Two more useful switches:
1. <code>-L 1</code> breaks based on new lines 
2. <code>-n 1</code> tells xargs to invoke the provided utility after receiving 1 argument.  </p>
<h3>tee</h3>
<p>The problem with redirection is that you cannot see the progress of your commands in the same terminal. The <code>tee</code> utility solves this. If you need to see the output on screen and also save it to a file, <code>tee</code> is your friend. Give it one or more filenames and it will do the trick. </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>allfiles<span class="w"> </span>myfiles
bob
errors
file1
jack
jadi
linus
output
sara
who_uses_what.txt
$<span class="w"> </span>cat<span class="w"> </span>allfiles<span class="w"> </span>myfiles
bob
errors
file1
jack
jadi
linus
output
sara
who_uses_what.txt
bob
errors
file1
jack
jadi
linus
output
sara
who_uses_what.txt
</code></pre></div>

<p>The <code>-a</code> switch will append to files if they exist.</p>
<blockquote>
<p>If you need to save <strong><em>stderr</em></strong> too, first redirect it to <strong><em>stdout</em></strong></p>
</blockquote>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1033-perform-basic-file-management.html">← 103.3 Perform basic file management</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1035-create-monitor-and-kill-processes.html">103.5 Create, monitor, and kill processes →</a>
                </td>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">19</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">22</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>