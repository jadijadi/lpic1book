<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="102.6 Linux as a virtualization guest "/>
<meta property="og:url" content="./1026-linux-as-a-virtualization-guest.html" />
<meta property="og:description" content="Candidates should understand the implications of virtualization and cloud computing on a Linux guest system." />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="102.6 Linux as a virtualization guest ">
<meta name="twitter:description" content="Candidates should understand the implications of virtualization and cloud computing on a Linux guest system.">

        <title>102.6 Linux as a virtualization guest  · lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1026-linux-as-a-virtualization-guest.html">
                102.6 Linux as a virtualization guest
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><em>Weight: 1</em></p>
<p>Candidates should understand the implications of virtualization and cloud computing on a Linux guest system.</p>
<h2>Key Knowledge Areas</h2>
<ul>
<li>Understand the general concept of virtual machines and containers</li>
<li>Understand common elements of virtual machines in an IaaS cloud, such as computing instances, block storage, and networking</li>
<li>Understand the unique properties of a Linux system which have to be changed when a system is cloned or used as a template</li>
<li>Understand how system images are used to deploy virtual machines, cloud instances, and containers</li>
<li>Understand Linux extensions that integrate Linux with a virtualization product.
Awareness of cloud-init</li>
</ul>
<h3>Terms</h3>
<ul>
<li>Virtual machine</li>
<li>Linux container</li>
<li>Application container</li>
<li>Guest drivers</li>
<li>SSH host keys</li>
<li>D-Bus machine id</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/F3yl5Lx1htc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2>Introduction</h2>
<p>Virtual machines (VMs) are <em>simulated</em> computers. You can use Virtual Machines to create new computers on top of your running machine and install new OSs there. In some cases, it's also possible to run only parts of an OS on top of the current OS; This is called having containers. </p>
<p>To run virtual machines, we need <strong>Hypervisor</strong> software (also called Virtual Machine Managers (VMM)). We have two types of hypervisors.</p>
<p>To check and see if your host operating system / CPU, supports using hypervisors check for the <code>vmx</code> (for Intel CPUs) or <code>svm</code> (for AMD CPUs) in your <code>/proc/cpuinfo</code> in flags. </p>
<blockquote>
<p>You may need to turn the hypervisor option On using your BIOS or UEFI.</p>
</blockquote>
<p>Based on your CPU you should have <code>kvm</code> or <code>kvm-amd</code> kernel modules loaded. </p>
<div class="highlight"><pre><span></span><code>lsmod | grep -i kvm
sudo modprobe kvm
</code></pre></div>

<blockquote>
<p>If you see <code>hypervisor</code> in your <code>/proc/cpuinfo</code> it means that you are inside a virtualized Linux machine :)</p>
</blockquote>
<p>Now, let's see the 2 types of hypervisors. First type 2, since it's easier to understand. </p>
<p><img alt="Types of hypervisors" src="images/hypervisor.png"></p>
<h3>Type 2 Hypervisor</h3>
<p>These hypervisors run on a conventional operating system (OS) just as other computer programs do. A guest operating system runs as a process on the host. Type-2 hypervisors abstract guest operating systems from the host operating system.</p>
<p>In other words, a type 2 hypervisor is the software between the guest and host. It completely runs on the host OS and provides virtualization to the guest. </p>
<p>Two of the most famous Type 2 hypervisors are VirtualBox (from Oracle) and VMware.</p>
<h3>Type 1 Hypervisor</h3>
<p>These hypervisors run directly on the host's hardware to control the hardware and manage guest operating systems. For this reason, they are sometimes called bare-metal hypervisors. The first hypervisors, which IBM developed in the 1960s, were native hypervisors. These included the test software SIMMON and the CP/CMS operating system, the predecessor of IBM z/VM.</p>
<p>Some of the most famous Type 1 hypervisors are KVM, Xen &amp; Hyper-V. <strong>KVM</strong> is built-in since Linux Kernel version 2.6.20. </p>
<h2>Creating a Virtual Machine</h2>
<p>First, create the machine itself. We tell the hypervisor this machine how much RAM/disk/CPU/... needs and set a name for our machine. Then we need to <em>install</em> the guest OS. This can be done using:</p>
<ul>
<li>Installing from a CD / DVD / ... </li>
<li><strong>Cloning</strong> an existing machine</li>
<li>Using <strong>Open Virtualization Format (OVF)</strong> to move machines between hypervisors. This is a standard format for virtual machine definition and may include several files, in this case, you can archive all of them into one <strong>Open Virtualization Archive (OVA)</strong> file.</li>
<li>It is also possible to create <strong>Templates</strong> that are <em>master copies</em>* to initiate new machines</li>
</ul>
<blockquote>
<p>You may need to install some <em>guest drivers</em> or <em>additions</em> to help your hypervisor to have better control over your guest machine. These might include graphical drivers for VirtualBox or scripts to help VMWare to control a guest machine or check its status. </p>
</blockquote>
<h2>Guest-specific configs</h2>
<p>Some configurations are machine specific. For example, a network card's MAC address should be unique for whole the network. If we are cloning a machine or sometimes creating them from templates, at least we need to change these on each machine before booting them:</p>
<ul>
<li>Host Name</li>
<li>NIC MAC Address</li>
<li>NIC IP (If not using DHCP)</li>
<li>Machine ID (delete the <code>/etc/machine-id</code> and <code>/var/lib/dbus/machine-id</code> and run <code>dbus-uuidgen --ensure</code>. These two files might be soft links to each other)</li>
<li>Encryption Keys like SSH Fingerprints and PGP keys</li>
<li>HDD UUIDs</li>
<li>Any other UUIDs on the system</li>
</ul>
<blockquote>
<p>Some configs might be empty on templates, do not forget to fill them too.</p>
</blockquote>
<h2>Containers</h2>
<p><img alt="Containers" src="/images/containers.png"></p>
<p>In previous sections, we were dealing with complete guest OSs. But is also possible to virtualize only parts of an OS; This is called OS-level virtualization. </p>
<p>OS-level virtualization is an operating system (OS) paradigm in which the kernel allows the existence of multiple isolated user-space instances, called containers. </p>
<p>This can be done to run an application or a service or even run most parts of a new OS for test purposes. </p>
<h2>IaaS</h2>
<p>As the name implies, <strong>Infrastructure as a Service</strong> or IaaS means offloading parts of your infrastructure to other companies. This means buying <em>services</em> like electricity, cooling, and even running hypervisors to another company and just renting your VirtualMachine from them. This makes your life easier because things like "Adding New Hards" now only mean paying a bit more for more HDD on your machine; Instead of buying HDDs and installing them, ... This is called cloud! You might even be able to move your machine from one continent to another one just with one click. </p>
<p>Samples of these cloud providers are <a href="(https://aws.amazon.com/)">Amazon Web Services</a>, <a href="(https://cloud.google.com/)">Google Cloud Platform</a>, and <a href="(https://azure.microsoft.com/en-us/)">Microsoft Azure</a>.</p>
<p>Different cloud providers might provide different levels of Infrastructure or services. These are some examples:</p>
<ul>
<li>Load Balancing: Distribute incoming requests between your servers</li>
<li>Block Storage: Providing disks to be configured by you and added to your machines</li>
<li>Object Storage: Lets you store your data directly; Say for photos</li>
<li>Elasticity: Lets you configure an automated increase/decrease in your service capacity based on request volume</li>
<li>SaaS: Software as a Service lets you use the software you need, on the Cloud as a Service. Think of having an online office suite for your company without installing anything on your workstations.</li>
</ul>
<p>There are programs like <code>cloud-init</code> which help you initialize your cloud machine with ease. This service can help you start machines based on templates on AWS, Azure, Digital Ocean, and others with ease.</p>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1025-use-rpm-and-yum-package-management.html">← 102.5 Use RPM and YUM package management</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1031-work-on-the-command-line.html">103.1 Work on the command line →</a>
                </td>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">19</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">22</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>