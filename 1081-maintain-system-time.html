<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 102, LPIC1-102-500, LPIC1, " />

<meta property="og:title" content="108.1 Maintain system time "/>
<meta property="og:url" content="./1081-maintain-system-time.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="108.1 Maintain system time ">
<meta name="twitter:description" content="">

        <title>108.1 Maintain system time  · lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1081-maintain-system-time.html">
                108.1 Maintain system time
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><em>Weight: 3</em></p>
<p>Candidates should be able to properly maintain the system time and synchronize the clock via NTP.</p>
<h3>Key Knowledge Areas</h3>
<ul>
<li>Set the system date and time.</li>
<li>Set the hardware clock to the correct time in UTC.</li>
<li>Configure the correct timezone.</li>
<li>Basic NTP configuration using <code>ntpd</code> and <code>chrony</code>.</li>
<li>Knowledge of using the <code>pool.ntp.org</code> service.</li>
<li>Awareness of the <code>ntpq</code> command.</li>
</ul>
<h3>Terms and Utilities</h3>
<ul>
<li><code>/usr/share/zoneinfo/</code></li>
<li><code>/etc/timezone</code></li>
<li><code>/etc/localtime</code></li>
<li><code>/etc/ntp.conf</code></li>
<li><code>/etc/chrony.conf</code></li>
<li><code>date</code></li>
<li><code>hwclock</code></li>
<li><code>ntpd</code></li>
<li><code>ntpdate</code></li>
<li><code>chronyc</code></li>
<li><code>pool.ntp.org</code></li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RhH-2I1dBjA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h3>How a computer keeps its time</h3>
<p>There is a clock in your computer; a hardware clock on your motherboard! It has its own battery and keeps the time even when the computer is off. When the system boots, the OS reads this <strong>hardware time</strong> and it sets it's own <strong>system time</strong> based on the hardware clock and uses this clock whenever it needs to know the time.</p>
<p>Hardware clock can be the set on localtime (the time shown on your clock wherever you are) or UTC time (standard time). The <code>hwclock</code> can be used to show the time based on the hwtime. See how it works based on the hardware time even after we DO CHANGE the system time:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>date
Fri<span class="w"> </span>Jun<span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">01</span>:47:22<span class="w"> </span>PM<span class="w"> </span>+0330<span class="w"> </span><span class="m">2023</span>
$<span class="w"> </span>sudo<span class="w"> </span>date<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Jan 22 22:22:22 2022&quot;</span>
Sat<span class="w"> </span>Jan<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">10</span>:22:22<span class="w"> </span>PM<span class="w"> </span>+0330<span class="w"> </span><span class="m">2022</span>
$<span class="w"> </span>date
Sat<span class="w"> </span>Jan<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">10</span>:22:29<span class="w"> </span>PM<span class="w"> </span>+0330<span class="w"> </span><span class="m">2022</span>
$<span class="w"> </span>sudo<span class="w"> </span>hwclock<span class="w"> </span>
<span class="m">2023</span>-06-23<span class="w"> </span><span class="m">13</span>:47:41.160122+03:30
</code></pre></div>

<blockquote>
<p>Even when the hardware clock is set on UTC, <code>hwclock</code> date shows the date in the localtime (time after adding the timezone to the UTC time)</p>
</blockquote>
<p>Older OSs used to set the hardware clock on localtime zone instead of timezone. This can be achieved by:</p>
<div class="highlight"><pre><span></span><code># hwclock --localtime --set --date=&quot;01/05/2023 22:04:00&quot;
</code></pre></div>

<p>The previous commands sets the hardware clock on that specific date and tell it that this is the localtime. If you want to change back to UTC time, issue:</p>
<div class="highlight"><pre><span></span><code># hwclock -u -w
</code></pre></div>

<p>Here, <code>-w</code> tells the <code>hwclock</code> to set the hardware time based on the current system time and <code>-u</code> tells the hwclock that we are using the UTC. This also sets the HWClock using UTC int he <code>\etc\adjtime</code> file.</p>
<blockquote>
<p>If you set a time on the hardware clock without mentioning it being UTC / Local, the <code>/etc/adjtime</code> will decide this, if this file does not exists, the UTC will be used.</p>
</blockquote>
<p>You already know about the <code>timedatectl</code> and <code>date</code> from the <a href="http://linux1st.com/1073-localisation-and-internationalisation.html">Localization and globalization chapter</a> so I wont repeat them here.</p>
<h3>Time Zones</h3>
<p>We have seen time zones in previous chapters. But in short, there are two important files here.</p>
<p>The <code>/etc/timezone</code> is a text file, representing your timezone. This is used if a program wants to know about your time zone of show it. For example:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>/etc/timezone<span class="w"> </span>
Asia/Tehran
</code></pre></div>

<p>But the <code>/etc/localtime</code> is a binary file describing your timezone info to the system (for example the <code>date</code> file):</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/etc/localtime<span class="w"> </span>
lrwxrwxrwx<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">31</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">11</span>:19<span class="w"> </span>/etc/localtime<span class="w"> </span>-&gt;<span class="w"> </span>/usr/share/zoneinfo/Asia/Tehran
$<span class="w"> </span>file<span class="w"> </span>/usr/share/zoneinfo/Asia/Tehran
/usr/share/zoneinfo/Asia/Tehran:<span class="w"> </span>timezone<span class="w"> </span>data,<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>,<span class="w"> </span>no<span class="w"> </span>gmt<span class="w"> </span><span class="nb">time</span><span class="w"> </span>flags,<span class="w"> </span>no<span class="w"> </span>std<span class="w"> </span><span class="nb">time</span><span class="w"> </span>flags,<span class="w"> </span>no<span class="w"> </span>leap<span class="w"> </span>seconds,<span class="w"> </span><span class="m">72</span><span class="w"> </span>transition<span class="w"> </span>times,<span class="w"> </span><span class="m">8</span><span class="w"> </span>abbreviation<span class="w"> </span>chars
</code></pre></div>

<p>In many cases, this is a soft link to a file located at <code>/usr/share/zoneinfo/</code> so it will be updated in case of system update.</p>
<h3>NTP</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ntyUBmG8F40" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p><strong>Network Time Protocol</strong>  is my personal favorite protocol. It is one of the coolest protocols ever if you dive into its details. But unfortunately for LPIC1 you do not need to dive into NTP depths. This protocol uses NTP servers to find out the accurate time shown by best atomic clocks on this planet. One of the most famous severs used by ntp people is <code>pool.ntp.org</code>. If you check that website you will see that it is a <strong>pool</strong> of ntp servers and by giving your NTP server the <code>pool.ntp.org</code>, it will be redirected to one of the many ntp servers available on that pool.</p>
<h4>ntpdate</h4>
<p>The most straight forward command to set the systemclock is <code>ntpdate</code> and used like this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ntpdate<span class="w"> </span>pool.ntp.org
<span class="m">23</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">14</span>:49:55<span class="w"> </span>ntpdate<span class="o">[</span><span class="m">160138</span><span class="o">]</span>:<span class="w"> </span>adjust<span class="w"> </span><span class="nb">time</span><span class="w"> </span>server<span class="w"> </span><span class="m">31</span>.214.170.254<span class="w"> </span>offset<span class="w"> </span>+0.020196<span class="w"> </span>sec
</code></pre></div>

<p>After this, we need to set the hwclock to the recently synced system time using <code>sudo hwclock -w</code>.</p>
<h4>ntpd</h4>
<p>Instead of manually setting the time each time, you can use a linux service called <code>ntp</code> to keep your time using some time servers (the most famous one is pool.ntp.org). Install the <code>ntp</code> and start the server:</p>
<p>In Debian/Ubuntu: </p>
<div class="highlight"><pre><span></span><code># apt install ntp
# systemctl start ntp
</code></pre></div>

<p>Fun fact? you can not use both! Look at this:</p>
<div class="highlight"><pre><span></span><code>root@funlife:~# ntpdate pool.ntp.org
23 Jun 14:49:55 ntpdate[18670]: the NTP socket is in use, exiting
</code></pre></div>

<p>As you can see, now the <code>ntp</code> is using the NTP port and <code>ntpdate</code> has problems starting up.</p>
<p>Main configuration file of <code>ntp</code> is located at <code>/etc/ntp.conf</code>:</p>
<div class="highlight"><pre><span></span><code># cat /etc/ntp.conf
# /etc/ntp.conf, configuration for ntpd; see ntp.conf(5) for help

driftfile /var/lib/ntp/ntp.drift

# Enable this if you want statistics to be logged.
#statsdir /var/log/ntpstats/

statistics loopstats peerstats clockstats
filegen loopstats file loopstats type day enable
filegen peerstats file peerstats type day enable
filegen clockstats file clockstats type day enable


# You do need to talk to an NTP server or two (or three).
#server ntp.your-provider.example

# pool.ntp.org maps to about 1000 low-stratum NTP servers.  Your server will
# pick a different set every time it starts up.  Please consider joining the
# pool: &lt;http://www.pool.ntp.org/join.html&gt;
pool 0.debian.pool.ntp.org iburst
pool 1.debian.pool.ntp.org iburst
pool 2.debian.pool.ntp.org iburst
pool 3.debian.pool.ntp.org iburst


# Access control configuration; see /usr/share/doc/ntp-doc/html/accopt.html for
# details.  The web page &lt;http://support.ntp.org/bin/view/Support/AccessRestrictions&gt;
# might also be helpful.
#
# Note that &quot;restrict&quot; applies to both servers and clients, so a configuration
# that might be intended to block requests from certain clients could also end
# up blocking replies from your own upstream servers.

# By default, exchange time with everybody, but don&#39;t allow configuration.
restrict -4 default kod notrap nomodify nopeer noquery limited
restrict -6 default kod notrap nomodify nopeer noquery limited

# Local users may interrogate the ntp server more closely.
restrict 127.0.0.1
restrict ::1

# Needed for adding pool entries
restrict source notrap nomodify noquery

# Clients from this (example!) subnet have unlimited access, but only if
# cryptographically authenticated.
#restrict 192.168.123.0 mask 255.255.255.0 notrust


# If you want to provide time to your local subnet, change the next line.
# (Again, the address is an example only.)
#broadcast 192.168.123.255

# If you want to listen to time broadcasts on your local subnet, de-comment the
# next lines.  Please do this only if you trust everybody on the network!
#disable auth
#broadcastclient
</code></pre></div>

<p>If needed, you can change the ntp servers to the ones you want to use.</p>
<p>Review the configuration and you will see cool things like providing your ntp service to other computers although you do not need these for passing LPIC.</p>
<h4>ntpq</h4>
<p>The <code>ntpq</code> queries the ntp service. One famous switch is <code>-p</code> (for Print) that shows the pool we are using to sync the clock:</p>
<div class="highlight"><pre><span></span><code> ntpq -p
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
 0.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 1.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 2.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 3.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
+46.209.14.1     192.168.5.2      4 u    7   64    1   58.300  -15.546  14.519
-ntp.tums.ac.ir  195.161.115.4    4 u    4   64    1   30.636    2.485   4.025
*194.225.150.25  194.190.168.1    2 u    5   64    1   31.478   -3.870  95.635
+5.160.24.41     192.168.5.2      4 u    3   64    1   90.000  -28.328  21.643
</code></pre></div>

<p>In this output a <code>*</code> means that the ntp is using this server as the main reference, <code>+</code> means that this is a good server and <code>-</code> shows an out of range server which will be neglected.</p>
<h3>chrony</h3>
<p>Another and a newer NTP protocol implemenation is the <code>chrony</code>. Compared to <code>ntpd</code> , this tool provides better results at synchronize time difficult conditions such as intermittent network connections (such as laptops) and congested networks. Chrony is the default NTP client in RedHat 8, SUSE 15 and many other distributions. Another adavn</p>
<p>Here is a sample <code>chrony.conf</code> file:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>/etc/chrony/chrony.conf<span class="w"> </span>
<span class="c1"># Welcome to the chrony configuration file. See chrony.conf(5) for more</span>
<span class="c1"># information about usable directives.</span>

<span class="c1"># Include configuration files found in /etc/chrony/conf.d.</span>
confdir<span class="w"> </span>/etc/chrony/conf.d

<span class="c1"># This will use (up to):</span>
<span class="c1"># - 4 sources from ntp.ubuntu.com which some are ipv6 enabled</span>
<span class="c1"># - 2 sources from 2.ubuntu.pool.ntp.org which is ipv6 enabled as well</span>
<span class="c1"># - 1 source from [01].ubuntu.pool.ntp.org each (ipv4 only atm)</span>
<span class="c1"># This means by default, up to 6 dual-stack and up to 2 additional IPv4-only</span>
<span class="c1"># sources will be used.</span>
<span class="c1"># At the same time it retains some protection against one of the entries being</span>
<span class="c1"># down (compare to just using one of the lines). See (LP: #1754358) for the</span>
<span class="c1"># discussion.</span>
<span class="c1">#</span>
<span class="c1"># About using servers from the NTP Pool Project in general see (LP: #104525).</span>
<span class="c1"># Approved by Ubuntu Technical Board on 2011-02-08.</span>
<span class="c1"># See http://www.pool.ntp.org/join.html for more information.</span>
pool<span class="w"> </span>ntp.ubuntu.com<span class="w">        </span>iburst<span class="w"> </span>maxsources<span class="w"> </span><span class="m">4</span>
pool<span class="w"> </span><span class="m">0</span>.ubuntu.pool.ntp.org<span class="w"> </span>iburst<span class="w"> </span>maxsources<span class="w"> </span><span class="m">1</span>
pool<span class="w"> </span><span class="m">1</span>.ubuntu.pool.ntp.org<span class="w"> </span>iburst<span class="w"> </span>maxsources<span class="w"> </span><span class="m">1</span>
pool<span class="w"> </span><span class="m">2</span>.ubuntu.pool.ntp.org<span class="w"> </span>iburst<span class="w"> </span>maxsources<span class="w"> </span><span class="m">2</span>

<span class="c1"># Use time sources from DHCP.</span>
sourcedir<span class="w"> </span>/run/chrony-dhcp

<span class="c1"># Use NTP sources found in /etc/chrony/sources.d.</span>
sourcedir<span class="w"> </span>/etc/chrony/sources.d

<span class="c1"># This directive specify the location of the file containing ID/key pairs for</span>
<span class="c1"># NTP authentication.</span>
keyfile<span class="w"> </span>/etc/chrony/chrony.keys

<span class="c1"># This directive specify the file into which chronyd will store the rate</span>
<span class="c1"># information.</span>
driftfile<span class="w"> </span>/var/lib/chrony/chrony.drift

<span class="c1"># Save NTS keys and cookies.</span>
ntsdumpdir<span class="w"> </span>/var/lib/chrony

<span class="c1"># Uncomment the following line to turn logging on.</span>
<span class="c1">#log tracking measurements statistics</span>

<span class="c1"># Log files location.</span>
logdir<span class="w"> </span>/var/log/chrony

<span class="c1"># Stop bad estimates upsetting machine clock.</span>
maxupdateskew<span class="w"> </span><span class="m">100</span>.0

<span class="c1"># This directive enables kernel synchronization (every 11 minutes) of the</span>
<span class="c1"># real-time clock. Note that it can’t be used along with the &#39;rtcfile&#39; directive.</span>
rtcsync

<span class="c1"># Step the system clock instead of slewing it if the adjustment is larger than</span>
<span class="c1"># one second, but only in the first three clock updates.</span>
makestep<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>

<span class="c1"># Get TAI-UTC offset and leap seconds from the system tz database.</span>
<span class="c1"># This directive must be commented out when using time sources serving</span>
<span class="c1"># leap-smeared time.</span>
leapsectz<span class="w"> </span>right/UTC
</code></pre></div>

<p>To control the <code>chrony</code> service, there is a CLI (Command Line Interface) which is called <code>chronyc</code>. It it used to monitor chronyd's performance and to change various operating parameters. If a "command" is passed to the <code>chronyc</code>, the results will be shown, otherwise you will get a command to issue your commands. Have a look:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>chronyc<span class="w"> </span>tracking
Reference<span class="w"> </span>ID<span class="w">    </span>:<span class="w"> </span>0FED61D6<span class="w"> </span><span class="o">(</span>paris.time.system76.com<span class="o">)</span>
Stratum<span class="w">         </span>:<span class="w"> </span><span class="m">3</span>
Ref<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="o">(</span>UTC<span class="o">)</span><span class="w">  </span>:<span class="w"> </span>Fri<span class="w"> </span>Jun<span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">12</span>:44:20<span class="w"> </span><span class="m">2023</span>
System<span class="w"> </span><span class="nb">time</span><span class="w">     </span>:<span class="w"> </span><span class="m">0</span>.001574947<span class="w"> </span>seconds<span class="w"> </span>slow<span class="w"> </span>of<span class="w"> </span>NTP<span class="w"> </span><span class="nb">time</span>
Last<span class="w"> </span>offset<span class="w">     </span>:<span class="w"> </span>+0.000513619<span class="w"> </span>seconds
RMS<span class="w"> </span>offset<span class="w">      </span>:<span class="w"> </span><span class="m">0</span>.065126784<span class="w"> </span>seconds
Frequency<span class="w">       </span>:<span class="w"> </span><span class="m">8</span>.705<span class="w"> </span>ppm<span class="w"> </span>slow
Residual<span class="w"> </span>freq<span class="w">   </span>:<span class="w"> </span>+0.278<span class="w"> </span>ppm
Skew<span class="w">            </span>:<span class="w"> </span><span class="m">14</span>.972<span class="w"> </span>ppm
Root<span class="w"> </span>delay<span class="w">      </span>:<span class="w"> </span><span class="m">0</span>.180896595<span class="w"> </span>seconds
Root<span class="w"> </span>dispersion<span class="w"> </span>:<span class="w"> </span><span class="m">0</span>.013603540<span class="w"> </span>seconds
Update<span class="w"> </span>interval<span class="w"> </span>:<span class="w"> </span><span class="m">128</span>.6<span class="w"> </span>seconds
Leap<span class="w"> </span>status<span class="w">     </span>:<span class="w"> </span>Normal
$<span class="w"> </span>chronyc
chrony<span class="w"> </span>version<span class="w"> </span><span class="m">4</span>.2
Copyright<span class="w"> </span><span class="o">(</span>C<span class="o">)</span><span class="w"> </span><span class="m">1997</span>-2003,<span class="w"> </span><span class="m">2007</span>,<span class="w"> </span><span class="m">2009</span>-2021<span class="w"> </span>Richard<span class="w"> </span>P.<span class="w"> </span>Curnow<span class="w"> </span>and<span class="w"> </span>others
chrony<span class="w"> </span>comes<span class="w"> </span>with<span class="w"> </span>ABSOLUTELY<span class="w"> </span>NO<span class="w"> </span>WARRANTY.<span class="w">  </span>This<span class="w"> </span>is<span class="w"> </span>free<span class="w"> </span>software,<span class="w"> </span>and
you<span class="w"> </span>are<span class="w"> </span>welcome<span class="w"> </span>to<span class="w"> </span>redistribute<span class="w"> </span>it<span class="w"> </span>under<span class="w"> </span>certain<span class="w"> </span>conditions.<span class="w">  </span>See<span class="w"> </span>the
GNU<span class="w"> </span>General<span class="w"> </span>Public<span class="w"> </span>License<span class="w"> </span>version<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>details.

chronyc&gt;<span class="w"> </span>activity
<span class="m">200</span><span class="w"> </span>OK
<span class="m">12</span><span class="w"> </span>sources<span class="w"> </span>online
<span class="m">0</span><span class="w"> </span>sources<span class="w"> </span>offline
<span class="m">0</span><span class="w"> </span>sources<span class="w"> </span>doing<span class="w"> </span>burst<span class="w"> </span><span class="o">(</span><span class="k">return</span><span class="w"> </span>to<span class="w"> </span>online<span class="o">)</span>
<span class="m">0</span><span class="w"> </span>sources<span class="w"> </span>doing<span class="w"> </span>burst<span class="w"> </span><span class="o">(</span><span class="k">return</span><span class="w"> </span>to<span class="w"> </span>offline<span class="o">)</span>
<span class="m">3</span><span class="w"> </span>sources<span class="w"> </span>with<span class="w"> </span>unknown<span class="w"> </span>address

chronyc&gt;<span class="w"> </span>sources
MS<span class="w"> </span>Name/IP<span class="w"> </span>address<span class="w">         </span>Stratum<span class="w"> </span>Poll<span class="w"> </span>Reach<span class="w"> </span>LastRx<span class="w"> </span>Last<span class="w"> </span><span class="nv">sample</span><span class="w">               </span>
<span class="o">===============================================================================</span>
^?<span class="w"> </span>prod-ntp-4.ntp4.ps5.cano&gt;<span class="w">     </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">375</span><span class="w">    </span><span class="m">20</span><span class="w">  </span>+5039us<span class="o">[</span>+5039us<span class="o">]</span><span class="w"> </span>+/-<span class="w">   </span>85ms
^?<span class="w"> </span>prod-ntp-5.ntp4.ps5.cano&gt;<span class="w">     </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">83</span><span class="w">    </span>+12ms<span class="o">[</span><span class="w">  </span>+15ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">   </span>87ms
^?<span class="w"> </span>prod-ntp-3.ntp4.ps5.cano&gt;<span class="w">     </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">177</span><span class="w">    </span><span class="m">22</span><span class="w">    </span>+13ms<span class="o">[</span><span class="w">  </span>+17ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">   </span>91ms
^?<span class="w"> </span>alphyn.canonical.com<span class="w">          </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">277</span><span class="w">    </span><span class="m">22</span><span class="w">  </span>+3298us<span class="o">[</span>+6616us<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>185ms
^?<span class="w"> </span>mail.stumpflee.com<span class="w">            </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">373</span><span class="w">    </span><span class="m">19</span><span class="w">  </span>+6221us<span class="o">[</span>+6221us<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>117ms
^?<span class="w"> </span>meetbsd.ir<span class="w">                    </span><span class="m">2</span><span class="w">   </span><span class="m">6</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">27</span><span class="w">    </span>-23ms<span class="o">[</span><span class="w">  </span>-20ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>231ms
^?<span class="w"> </span><span class="m">188</span>.121.119.122<span class="w">               </span><span class="m">3</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">26</span><span class="w">    </span>-27ms<span class="o">[</span><span class="w">  </span>-23ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>131ms
^+<span class="w"> </span>brazil.time.system76.com<span class="w">      </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">20</span><span class="w">    </span>-13ms<span class="o">[</span><span class="w">  </span>-13ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>190ms
^+<span class="w"> </span>ohio.time.system76.com<span class="w">        </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">21</span><span class="w">    </span>+23ms<span class="o">[</span><span class="w">  </span>+23ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>171ms
^+<span class="w"> </span>oregon.time.system76.com<span class="w">      </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">23</span><span class="w">    </span>+22ms<span class="o">[</span><span class="w">  </span>+26ms<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>217ms
^*<span class="w"> </span>paris.time.system76.com<span class="w">       </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">377</span><span class="w">    </span><span class="m">24</span><span class="w">  </span>-4880us<span class="o">[</span>-1560us<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>109ms
^+<span class="w"> </span>virginia.time.system76.c&gt;<span class="w">     </span><span class="m">2</span><span class="w">   </span><span class="m">7</span><span class="w">   </span><span class="m">163</span><span class="w">    </span><span class="m">19</span><span class="w">  </span>+5465us<span class="o">[</span>+5465us<span class="o">]</span><span class="w"> </span>+/-<span class="w">  </span>148ms

chronyc&gt;<span class="w"> </span><span class="nb">exit</span>
$<span class="w"> </span>sudo<span class="w"> </span>chronyc<span class="w"> </span>makestep
<span class="m">200</span><span class="w"> </span>OK
</code></pre></div>

<p><code>chrnoyc</code> connects to the chrony service using TCP or Unix sockets. Therefore, it is possible to use a local <code>chronyc</code> to connect to remote <code>chrony</code> and issue commands, although in this case you are limited to mainly monitoring commands for security reasons.</p>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1073-localisation-and-internationalisation.html">← 107.3 Localisation and internationalisation</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1082-system-logging.html">108.2 System logging →</a>
                </td>
                
                
                
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#102-ref">102
                    <span class="superscript">20</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-102-500-ref">LPIC1-102-500
                    <span class="superscript">20</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>