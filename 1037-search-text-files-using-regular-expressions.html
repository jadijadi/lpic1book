<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="103.7 Search text files using regular expressions "/>
<meta property="og:url" content="./1037-search-text-files-using-regular-expressions.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="103.7 Search text files using regular expressions ">
<meta name="twitter:description" content="">

        <title>103.7 Search text files using regular expressions  · lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1037-search-text-files-using-regular-expressions.html">
                103.7 Search text files using regular expressions
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><em>Weight: 3</em></p>
<p>Candidates should be able to manipulate files and text data using regular expressions. This objective includes creating simple regular expressions containing several notational elements as well as understanding the differences between basic and extended regular expressions. It also includes using regular expression tools to perform searches through a filesystem or file content.</p>
<h2>Objectives</h2>
<ul>
<li>Create simple regular expressions containing several notational elements.</li>
<li>Understand the differences between basic and extended regular expressions.</li>
<li>Understand the concepts of special characters, character classes, quantifiers and anchors.</li>
<li>Use regular expression tools to perform searches through a filesystem or file content.</li>
<li>
<p>Use regular expressions to delete, change and substitute text.</p>
</li>
<li>
<p>grep</p>
</li>
<li>egrep</li>
<li>fgrep</li>
<li>sed</li>
<li>regex(7)</li>
</ul>
<h3>Regex</h3>
<p>Regular expression, Regex, regex is a pattern to describe what you want to <em>match</em> from a text. For example <code>a</code> and <code>ad</code> both matches <code>jadi</code>. <code>d.</code> is a <em>deeper</em> example because <code>.</code> means <em>anything</em> so <code>d.</code> will match the last two characters of <code>jadi</code>. In this section we will cover the <em>grep</em>* (generalised regular expression processor) command. It has different regex <em>accents</em>; in short Basic regex and Extended regex.</p>
<h4>Regex basics</h4>
<p><strong>Simple match</strong>
You can simply write down whatever you want to match and regex will search for that.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Regex</th>
<th style="text-align: left;">Will match</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">a</td>
<td style="text-align: left;">after, mina, banana, jadi</td>
</tr>
<tr>
<td style="text-align: left;">na</td>
<td style="text-align: left;">Narator, mina, nananana batman, sonar</td>
</tr>
</tbody>
</table>
<p><strong>Repeating</strong></p>
<ul>
<li>The <strong>*</strong> means repeating the previous character for 0 or more times</li>
<li>The <strong>+</strong> means repeating the previous character for 1 or more times</li>
<li>the <strong>?</strong> means zero or one repeats</li>
<li>{n,m} means the item needs to match at least n times, but not more than m times</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Regex</th>
<th style="text-align: left;">Will match</th>
<th style="text-align: left;">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">a*b</td>
<td style="text-align: left;">ab, aaab, aaaaab, aaabthis</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">a*b</td>
<td style="text-align: left;">b, sober</td>
<td style="text-align: left;">we should have zero or more <code>a</code>s and then a <code>b</code></td>
</tr>
<tr>
<td style="text-align: left;">a+b</td>
<td style="text-align: left;">ab, aab, aaabenz</td>
<td style="text-align: left;">wont match <strong>sober</strong> or <strong>b</strong> because there needs to be at least one <strong>a</strong></td>
</tr>
<tr>
<td style="text-align: left;">a?b</td>
<td style="text-align: left;">ab, a<strong>ab</strong>, b, batman (zero a then b), ...</td>
<td style="text-align: left;">.</td>
</tr>
</tbody>
</table>
<p><strong>Alternation (|)</strong></p>
<p>If you say <code>a|b</code> it will match <code>a</code> or <code>b</code>.</p>
<p><strong>Character Classes</strong></p>
<p>The dot (<strong>.</strong>) means any character. So <strong>..</strong> will match anything with at least two character in it. You can also create your own classes with [abc] which will match a or b or c and [a-z] which match a to z.</p>
<p>You can also refer to digits with \d. </p>
<blockquote>
<p>regex is case sensitive.</p>
</blockquote>
<p><strong>Ranges</strong></p>
<p>There are short-hands for commonly used classes. Named classes start with <code>[:</code> and end in <code>:]</code>.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Range</th>
<th style="text-align: left;">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">[:alnum:]</td>
<td style="text-align: left;">Alphanumeric characters</td>
</tr>
<tr>
<td style="text-align: left;">[:blank:]</td>
<td style="text-align: left;">Space and tab characters</td>
</tr>
<tr>
<td style="text-align: left;">[:digit:]</td>
<td style="text-align: left;">The digits 0 through 9 (equivalent to 0-9)</td>
</tr>
<tr>
<td style="text-align: left;">[:upper:] and [:lower:]</td>
<td style="text-align: left;">Upper and lower case letters, respectively.</td>
</tr>
<tr>
<td style="text-align: left;">^ (negation)</td>
<td style="text-align: left;">As the first character after [ in a character class negates the sense of the remaining characters</td>
</tr>
</tbody>
</table>
<blockquote>
<p>A common used regex is .* which matches any character (zero or any length).</p>
</blockquote>
<p><strong>Matching at specific locations</strong></p>
<ul>
<li>The caret <strong>^</strong> means beginning of the string</li>
<li>The dollar <strong>$</strong> means the end of the string</li>
</ul>
<h4>Samples</h4>
<ul>
<li><code>^a.*</code> Matches anything that starts with a</li>
<li><code>^a.*b$</code> Matches anything that starts with a and ends with b</li>
<li><code>^a.*\d+.*b$</code> Matches anything that starting with a, have some digits in the middle and end with b</li>
<li><code>^(l|b)oo</code> Matches anything that starts with l or b and then have oo</li>
<li><code>[f-h]|[A-K]$</code> The last character should be f to h (capital or small)</li>
</ul>
<h3>grep</h3>
<p>The <code>grep</code> command can search inside the files.</p>
<div class="highlight"><pre><span></span><code>$ grep funk words 
Garfunkel
Garfunkel&#39;s
funk
funked
funkier
funkiest
funking
funk&#39;s
funks
funky
</code></pre></div>

<p>These are the most common switches:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">switch</th>
<th style="text-align: left;">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">-c</td>
<td style="text-align: left;">just show the count</td>
</tr>
<tr>
<td style="text-align: left;">-v</td>
<td style="text-align: left;">reverse the search</td>
</tr>
<tr>
<td style="text-align: left;">-n</td>
<td style="text-align: left;">show line numbers</td>
</tr>
<tr>
<td style="text-align: left;">-l</td>
<td style="text-align: left;">show only file names</td>
</tr>
<tr>
<td style="text-align: left;">-i</td>
<td style="text-align: left;">case insensitive</td>
</tr>
<tr>
<td style="text-align: left;">-r</td>
<td style="text-align: left;">Read  all  files  under each directory, recursively</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>$ grep a *txt
friends.txt:Rosha
friends.txt:Xavier
friends.txt:Krishna
friends.txt:Mary
my_thinkgs.txt:laptop
$ grep z *txt
$ grep z *txt -i 
friends.txt:Zee
$ grep x words -i -c 
<span class="m">2264</span>
$ grep z *txt -i -l
friends.txt
$ grep Z *txt -v
friends.txt:Rosha
friends.txt:Jim
friends.txt:Xavier
friends.txt:Krishna
friends.txt:Mary
my_thinkgs.txt:laptop
my_thinkgs.txt:pillow
my_thinkgs.txt:shorts
my_thinkgs.txt:t-shirt
$ grep Z friends.txt -v
Rosha
Jim
Xavier
Krishna
Mary
$ 
</code></pre></div>

<p>As an another example, lets search all the <code>/etc</code> for all files containing an IP address and sending the errors (mostly "you do not have permission to read this") to <code>/dev/null</code>:</p>
<div class="highlight"><pre><span></span><code>$ egrep -r <span class="s2">&quot;192.168.(1|0).&quot;</span> /etc/ <span class="m">2</span>&gt; /dev/null
/etc/privoxy/config:#      address <span class="m">192</span>.168.0.1 on your <span class="nb">local</span> private network
/etc/privoxy/config:#      <span class="o">(</span><span class="m">192</span>.168.0.0<span class="o">)</span> and has another outside connection with a
/etc/privoxy/config:#        listen-address  <span class="m">192</span>.168.0.1:8118
/etc/avahi/hosts:# <span class="m">192</span>.168.0.1 router.local
/etc/dhcp/dhclient-exit-hooks.d/rfc3442-classless-routes:#   <span class="nv">new_rfc3442_classless_static_routes</span><span class="o">=</span><span class="s1">&#39;24 192 168 10 192 168 1 1 8 10 10 17 66 41&#39;</span>
/etc/dhcp/dhclient-exit-hooks.d/rfc3442-classless-routes:#   <span class="m">192</span>.168.10.0/24 via <span class="m">192</span>.168.1.1
/etc/hosts:192.168.1.22 atiteltestbed
/etc/hosts:192.168.100.244 adpsms
/etc/ppp/options:# ms-dns <span class="m">192</span>.168.1.1
/etc/ppp/options:# ms-dns <span class="m">192</span>.168.1.2
/etc/ppp/options:# ms-wins <span class="m">192</span>.168.1.50
/etc/ppp/options:# ms-wins <span class="m">192</span>.168.1.51
/etc/ssl/openssl.cnf:# <span class="nv">proxy</span> <span class="o">=</span> <span class="c1"># set this as far as needed, e.g., http://192.168.1.1:8080</span>
/etc/cups/cups-browsed.conf:# BrowseAllow <span class="m">192</span>.168.1.12
/etc/cups/cups-browsed.conf:# BrowseAllow <span class="m">192</span>.168.1.0/24
/etc/cups/cups-browsed.conf:# BrowseAllow <span class="m">192</span>.168.1.0/255.255.255.0
/etc/cups/cups-browsed.conf:# BrowseDeny <span class="m">192</span>.168.1.13
/etc/proxychains4.conf:## Exclude connections to <span class="m">192</span>.168.1.0/24 with port <span class="m">80</span>
/etc/proxychains4.conf:# localnet <span class="m">192</span>.168.1.0:80/255.255.255.0
/etc/proxychains4.conf:## Exclude connections to <span class="m">192</span>.168.100.0/24
/etc/proxychains4.conf:# localnet <span class="m">192</span>.168.100.0/255.255.255.0
/etc/proxychains4.conf:# localnet <span class="m">192</span>.168.0.0/255.255.0.0
/etc/proxychains4.conf:#        socks4  <span class="m">192</span>.168.1.49    <span class="m">1080</span>
/etc/sane.d/kodakaio.conf:#net <span class="m">192</span>.168.1.2 0x4041
/etc/sane.d/kodakaio.conf:#net <span class="m">192</span>.168.1.17 0x4067
/etc/sane.d/epsonds.conf:# net <span class="m">192</span>.168.1.123
/etc/sane.d/airscan.conf:#<span class="s2">&quot;Kyocera MFP Scanner&quot;</span> <span class="o">=</span> http://192.168.1.102:9095/eSCL
/etc/sane.d/airscan.conf:#ip    <span class="o">=</span> <span class="m">192</span>.168.0.1    <span class="p">;</span> blacklist by address
/etc/sane.d/airscan.conf:#ip    <span class="o">=</span> <span class="m">192</span>.168.0.0/24 <span class="p">;</span> blacklist the whole subnet
/etc/sane.d/dell1600n_net.conf:#named_scanner: <span class="m">192</span>.168.0.20
/etc/sane.d/epson2.conf:# net <span class="m">192</span>.168.1.123
/etc/sane.d/magicolor.conf:# net <span class="m">192</span>.168.0.1
/etc/sane.d/saned.conf:#192.168.0.1
/etc/sane.d/saned.conf:#192.168.0.1/29
/etc/fwupd/redfish.conf:# ex: https://192.168.0.133:443
</code></pre></div>

<h3>extended grep</h3>
<p>Regex is cool and <code>grep</code> is awesome so many people have tried adding to them or invent their own variants. One is GNU Extended grep. This accent of regex, does not need much escaping and you can use it via <code>-E</code> switch or using <code>egrep</code> instead of the normal <code>grep</code>. For example, <code>|</code> in an extended regex means "or". So you can do a <code>egrep "a|b" words</code> to match anything with an <code>a</code> or a <code>b</code>. </p>
<h3>Fixed grep</h3>
<p>If you need to search for exact strings (and not interpret it as a regex), use <code>grep -F</code> or <code>fgrep</code> so the <code>fgrep this$</code> wont go for the end of the line and will find <em>this$that</em> instead.</p>
<h3>sed</h3>
<p>In previous lessons we saw simple <code>sed</code> usage and now I have great news for you: <strong>sed understands regex</strong>! You can use <code>-r</code> switch to tell sed that we are using regexes.</p>
<div class="highlight"><pre><span></span><code>$ sed -r <span class="s2">&quot;s/(Z|R|J)/starts with ZRJ/&quot;</span> friends.txt 
starts with ZRJee
starts with ZRJosha
starts with ZRJim
Xavier
Krishna
Mary
</code></pre></div>

<p>Common switches:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">switch</th>
<th style="text-align: left;">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">-r</td>
<td style="text-align: left;">use advanced regex</td>
</tr>
<tr>
<td style="text-align: left;">-n</td>
<td style="text-align: left;">suppress output, you can use p at the end of your regex ( /something/p ) to print the output</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>sed -rn &quot;s/happy/HAPPY/p&quot; words 
HAPPY
slapHAPPY
unHAPPY
</code></pre></div>

<p>Still eager to learn? See how you can solve the Wordle using regexes:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZbdTghkVM_4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1036-modify-process-execution-priorities.html">← 103.6 Modify process execution priorities</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1038-basic-file-editing.html">103.8 Basic file editing →</a>
                </td>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">38</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">41</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>